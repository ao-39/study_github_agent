# ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ–¹é‡

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€ä»Šå¾Œå®Ÿè£…äºˆå®šã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¨­è¨ˆæ–¹é‡ã¨å®Ÿè£…è¨ˆç”»ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã¯

### åŸºæœ¬æ¦‚å¿µ
ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ã€Robert C. Martinï¼ˆUncle Bobï¼‰ãŒæå”±ã—ãŸã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã€ä»¥ä¸‹ã®åŸå‰‡ã«åŸºã¥ã„ã¦ã„ã¾ã™ï¼š

1. **é–¢å¿ƒã®åˆ†é›¢**: å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒæ˜ç¢ºãªè²¬ä»»ã‚’æŒã¤
2. **ä¾å­˜é–¢ä¿‚é€†è»¢**: å†…å´ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯å¤–å´ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ä¾å­˜ã—ãªã„
3. **ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£**: å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ç‹¬ç«‹ã—ã¦ãƒ†ã‚¹ãƒˆå¯èƒ½
4. **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ç‹¬ç«‹**: ç‰¹å®šã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ä¾å­˜ã—ãªã„è¨­è¨ˆ

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã®é©ç”¨æ„ç¾©
- **è¤‡é›‘æ€§ã®ç®¡ç†**: å¤§è¦æ¨¡ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã®ä¿å®ˆæ€§å‘ä¸Š
- **å¤‰æ›´ã¸ã®å¯¾å¿œ**: UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚„APIå¤‰æ›´ã¸ã®æŸ”è»Ÿæ€§
- **ãƒ†ã‚¹ãƒˆæ€§**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®åŠ¹ç‡çš„ãªãƒ†ã‚¹ãƒˆ
- **ãƒãƒ¼ãƒ é–‹ç™º**: æ˜ç¢ºãªå¢ƒç•Œã«ã‚ˆã‚‹ä¸¦è¡Œé–‹ç™ºã®å®Ÿç¾

## ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹æˆ

### 1. Entitiesï¼ˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼‰
**è²¬å‹™**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ ¸ã¨ãªã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã¨ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

#### ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ï¼ˆBrand Typesï¼‰ã¨Zodãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®çµ±åˆ

ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã¨Zodã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€å‹å®‰å…¨æ€§ã¨ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¸¡ç«‹ã—ã¾ã™ã€‚

```typescript
// entities/types/brand.ts
import { z } from 'zod'

/**
 * ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹
 */
export type Brand<T, TBrand> = T & { readonly __brand: TBrand }

/**
 * Zodã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã‚’ä½œæˆã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
 */
export function createBrandedSchema<T, TBrand extends string>(
  schema: z.ZodType<T>,
  brand: TBrand
) {
  return schema.transform((value): Brand<T, TBrand> => 
    value as Brand<T, TBrand>
  )
}

/**
 * ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã®å€¤ã‚’å®‰å…¨ã«å–å¾—ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
 */
export function unwrapBrand<T, TBrand>(value: Brand<T, TBrand>): T {
  return value as T
}
```

```typescript
// entities/User.ts
import { z } from 'zod'
import { Brand, createBrandedSchema, unwrapBrand } from './types/brand'

// ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã®å®šç¾©
export type UserId = Brand<string, 'UserId'>
export type Email = Brand<string, 'Email'>
export type UserName = Brand<string, 'UserName'>

// Zodã‚¹ã‚­ãƒ¼ãƒã®å®šç¾©
export const UserIdSchema = createBrandedSchema(
  z.string()
    .min(3, 'ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã¯3æ–‡å­—ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™')
    .max(50, 'ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã¯50æ–‡å­—ä»¥ä¸‹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™')
    .regex(/^[a-zA-Z0-9_-]+$/, 'è‹±æ•°å­—ã€ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã€ãƒã‚¤ãƒ•ãƒ³ã®ã¿ä½¿ç”¨å¯èƒ½ã§ã™'),
  'UserId'
)

export const EmailSchema = createBrandedSchema(
  z.string()
    .email('æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼ã§å…¥åŠ›ã—ã¦ãã ã•ã„')
    .max(254, 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯254æ–‡å­—ä»¥ä¸‹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™'),
  'Email'
)

export const UserNameSchema = createBrandedSchema(
  z.string()
    .min(1, 'ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„')
    .max(100, 'ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯100æ–‡å­—ä»¥ä¸‹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™')
    .regex(/^[^\s].*[^\s]$/, 'ãƒ¦ãƒ¼ã‚¶ãƒ¼åã®å‰å¾Œã«ç©ºç™½ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“'),
  'UserName'
)

// UserProfileã‚¹ã‚­ãƒ¼ãƒ
export const UserProfileSchema = z.object({
  firstName: UserNameSchema,
  lastName: UserNameSchema,
  bio: z.string().max(500, 'è‡ªå·±ç´¹ä»‹ã¯500æ–‡å­—ä»¥ä¸‹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™').optional(),
  avatarUrl: z.string().url('æœ‰åŠ¹ãªURLå½¢å¼ã§å…¥åŠ›ã—ã¦ãã ã•ã„').optional(),
})

export type UserProfile = z.infer<typeof UserProfileSchema>

// Userã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚¹ã‚­ãƒ¼ãƒ
export const UserSchema = z.object({
  id: UserIdSchema,
  email: EmailSchema,
  profile: UserProfileSchema,
  createdAt: z.date(),
  updatedAt: z.date(),
})

export type User = z.infer<typeof UserSchema>

// ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼é–¢æ•°ï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãï¼‰
export class UserFactory {
  /**
   * æ–°ã—ã„Userã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ä½œæˆã—ã¾ã™
   * @param data - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿
   * @returns æ¤œè¨¼æ¸ˆã¿Userã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
   * @throws ZodError ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼æ™‚
   */
  static create(data: unknown): User {
    return UserSchema.parse(data)
  }

  /**
   * æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰Userã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’å¾©å…ƒã—ã¾ã™
   * @param data - æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿
   * @returns æ¤œè¨¼æ¸ˆã¿Userã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
   */
  static fromExisting(data: {
    id: string
    email: string
    profile: {
      firstName: string
      lastName: string
      bio?: string
      avatarUrl?: string
    }
    createdAt: Date | string
    updatedAt: Date | string
  }): User {
    return this.create({
      ...data,
      createdAt: typeof data.createdAt === 'string' ? new Date(data.createdAt) : data.createdAt,
      updatedAt: typeof data.updatedAt === 'string' ? new Date(data.updatedAt) : data.updatedAt,
    })
  }

  /**
   * ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’å®‰å…¨ã«ä½œæˆã—ã¾ã™
   * @param value - ãƒ¦ãƒ¼ã‚¶ãƒ¼IDæ–‡å­—åˆ—
   * @returns æ¤œè¨¼æ¸ˆã¿UserId
   */
  static createUserId(value: string): UserId {
    return UserIdSchema.parse(value)
  }

  /**
   * ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å®‰å…¨ã«ä½œæˆã—ã¾ã™
   * @param value - ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹æ–‡å­—åˆ—
   * @returns æ¤œè¨¼æ¸ˆã¿Email
   */
  static createEmail(value: string): Email {
    return EmailSchema.parse(value)
  }

  /**
   * ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å®‰å…¨ã«ä½œæˆã—ã¾ã™
   * @param value - ãƒ¦ãƒ¼ã‚¶ãƒ¼åæ–‡å­—åˆ—
   * @returns æ¤œè¨¼æ¸ˆã¿UserName
   */
  static createUserName(value: string): UserName {
    return UserNameSchema.parse(value)
  }
}

// ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
export const UserHelpers = {
  /**
   * ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚’å–å¾—ã—ã¾ã™
   */
  getFullName(user: User): string {
    return `${unwrapBrand(user.profile.firstName)} ${unwrapBrand(user.profile.lastName)}`
  },

  /**
   * ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã®æ–‡å­—åˆ—è¡¨ç¾ã‚’å–å¾—ã—ã¾ã™
   */
  getIdString(user: User): string {
    return unwrapBrand(user.id)
  },

  /**
   * ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®æ–‡å­—åˆ—è¡¨ç¾ã‚’å–å¾—ã—ã¾ã™
   */
  getEmailString(user: User): string {
    return unwrapBrand(user.email)
  },

  /**
   * ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç®¡ç†è€…æ¨©é™ã‚’æŒã£ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã—ã¾ã™
   */
  isAdmin(user: User): boolean {
    const email = unwrapBrand(user.email)
    return email.endsWith('@admin.example.com')
  },
}
```

### 2. Use Casesï¼ˆãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼‰
**è²¬å‹™**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å›ºæœ‰ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯

#### ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã‚’æ´»ç”¨ã—ãŸãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å®Ÿè£…

```typescript
// use-cases/user/GetUserUseCase.ts
import { z } from 'zod'
import { User, UserId, UserIdSchema, UserFactory } from '../../entities/User'

// Repository ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã‚’ä½¿ç”¨
export interface UserRepository {
  findById(id: UserId): Promise<User | null>
  save(user: User): Promise<void>
  delete(id: UserId): Promise<void>
  findByEmail(email: Email): Promise<User | null>
}

export interface NotificationService {
  send(message: string, recipient: Email): Promise<void>
}

// å…¥åŠ›æ¤œè¨¼ã‚¹ã‚­ãƒ¼ãƒ
export const GetUserInputSchema = z.object({
  userId: UserIdSchema,
})

export type GetUserInput = z.infer<typeof GetUserInputSchema>

// å‡ºåŠ›ã‚¹ã‚­ãƒ¼ãƒ
export const GetUserOutputSchema = z.object({
  user: z.custom<User>(),
  lastAccessTime: z.date(),
})

export type GetUserOutput = z.infer<typeof GetUserOutputSchema>

// ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼ã‚¯ãƒ©ã‚¹
export class UserNotFoundError extends Error {
  constructor(userId: UserId) {
    super(`ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: ${userId}`)
    this.name = 'UserNotFoundError'
  }
}

export class UserAccessDeniedError extends Error {
  constructor(userId: UserId) {
    super(`ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸ: ${userId}`)
    this.name = 'UserAccessDeniedError'
  }
}

export class GetUserUseCase {
  constructor(
    private readonly userRepository: UserRepository,
    private readonly notificationService: NotificationService
  ) {}

  /**
   * ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã—ã¾ã™
   * @param input - å–å¾—å¯¾è±¡ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
   * @returns ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã¨ã‚¢ã‚¯ã‚»ã‚¹æ™‚åˆ»
   * @throws UserNotFoundError ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå­˜åœ¨ã—ãªã„å ´åˆ
   * @throws UserAccessDeniedError ã‚¢ã‚¯ã‚»ã‚¹ãŒæ‹’å¦ã•ã‚ŒãŸå ´åˆ
   */
  async execute(input: unknown): Promise<GetUserOutput> {
    // å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆZodã‚’ä½¿ç”¨ï¼‰
    const validatedInput = GetUserInputSchema.parse(input)
    
    const user = await this.userRepository.findById(validatedInput.userId)
    
    if (!user) {
      throw new UserNotFoundError(validatedInput.userId)
    }

    // ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«: å‰Šé™¤ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯
    if (this.isUserDeleted(user)) {
      throw new UserAccessDeniedError(validatedInput.userId)
    }

    // ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã«é€šçŸ¥é€ä¿¡
    await this.notificationService.send(
      'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒé–²è¦§ã•ã‚Œã¾ã—ãŸ',
      user.email
    )

    const result: GetUserOutput = {
      user,
      lastAccessTime: new Date(),
    }

    return GetUserOutputSchema.parse(result)
  }

  private isUserDeleted(user: User): boolean {
    // ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ä¾‹: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒç©ºã®å ´åˆã¯å‰Šé™¤æ¸ˆã¿æ‰±ã„
    return !user.profile.firstName || !user.profile.lastName
  }
}
```

```typescript
// use-cases/user/UpdateUserUseCase.ts
import { z } from 'zod'
import { User, UserId, UserProfile, UserProfileSchema, UserFactory } from '../../entities/User'

// æ›´æ–°å…¥åŠ›ã‚¹ã‚­ãƒ¼ãƒ
export const UpdateUserInputSchema = z.object({
  userId: UserIdSchema,
  profileUpdates: UserProfileSchema.partial(), // éƒ¨åˆ†æ›´æ–°ã‚’è¨±å¯
})

export type UpdateUserInput = z.infer<typeof UpdateUserInputSchema>

// æ›´æ–°å‡ºåŠ›ã‚¹ã‚­ãƒ¼ãƒ
export const UpdateUserOutputSchema = z.object({
  updatedUser: z.custom<User>(),
  changeLog: z.array(z.string()),
})

export type UpdateUserOutput = z.infer<typeof UpdateUserOutputSchema>

export class UpdateUserUseCase {
  constructor(
    private readonly userRepository: UserRepository,
    private readonly notificationService: NotificationService
  ) {}

  /**
   * ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã™
   * @param input - æ›´æ–°å¯¾è±¡ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã¨æ›´æ–°å†…å®¹
   * @returns æ›´æ–°ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã¨å¤‰æ›´ãƒ­ã‚°
   * @throws UserNotFoundError ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå­˜åœ¨ã—ãªã„å ´åˆ
   * @throws ZodError ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã®å ´åˆ
   */
  async execute(input: unknown): Promise<UpdateUserOutput> {
    // å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    const validatedInput = UpdateUserInputSchema.parse(input)
    
    const existingUser = await this.userRepository.findById(validatedInput.userId)
    
    if (!existingUser) {
      throw new UserNotFoundError(validatedInput.userId)
    }

    // å¤‰æ›´ãƒ­ã‚°ã®ä½œæˆ
    const changeLog: string[] = []

    // æ›´æ–°ã•ã‚ŒãŸãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®ä½œæˆ
    const updatedProfile = {
      ...existingUser.profile,
      ...validatedInput.profileUpdates,
    }

    // å¤‰æ›´æ¤œçŸ¥ã¨ãƒ­ã‚°ä½œæˆ
    if (validatedInput.profileUpdates.firstName) {
      changeLog.push(`åå‰ã‚’å¤‰æ›´: ${existingUser.profile.firstName} â†’ ${validatedInput.profileUpdates.firstName}`)
    }
    if (validatedInput.profileUpdates.lastName) {
      changeLog.push(`å§“ã‚’å¤‰æ›´: ${existingUser.profile.lastName} â†’ ${validatedInput.profileUpdates.lastName}`)
    }
    if (validatedInput.profileUpdates.bio !== undefined) {
      changeLog.push('è‡ªå·±ç´¹ä»‹ã‚’æ›´æ–°')
    }

    // æ–°ã—ã„Userã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ä½œæˆï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãï¼‰
    const updatedUser = UserFactory.create({
      ...existingUser,
      profile: updatedProfile,
      updatedAt: new Date(),
    })

    // ä¿å­˜
    await this.userRepository.save(updatedUser)

    // é€šçŸ¥é€ä¿¡
    await this.notificationService.send(
      'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸ',
      updatedUser.email
    )

    const result: UpdateUserOutput = {
      updatedUser,
      changeLog,
    }

    return UpdateUserOutputSchema.parse(result)
  }
}
```

### 3. Interface Adaptersï¼ˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼‰
**è²¬å‹™**: å¤–éƒ¨ã¨ã®ãƒ‡ãƒ¼ã‚¿å¤‰æ›ã¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

#### APIã¨ã®ãƒ‡ãƒ¼ã‚¿å¤‰æ›ã«ãŠã‘ã‚‹ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã¨Zodæ´»ç”¨

```typescript
// adapters/repositories/ApiUserRepository.ts
import { z } from 'zod'
import { UserRepository } from '../../use-cases/user/GetUserUseCase'
import { User, UserId, Email, UserFactory, unwrapBrand } from '../../entities/User'

// API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¹ã‚­ãƒ¼ãƒï¼ˆå¤–éƒ¨å½¢å¼ï¼‰
export const ApiUserResponseSchema = z.object({
  id: z.string(),
  email: z.string(),
  first_name: z.string(),
  last_name: z.string(),
  bio: z.string().nullable(),
  avatar_url: z.string().nullable(),
  created_at: z.string(),
  updated_at: z.string(),
  is_active: z.boolean(),
})

export type ApiUserResponse = z.infer<typeof ApiUserResponseSchema>

// API ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¹ã‚­ãƒ¼ãƒï¼ˆå¤–éƒ¨å½¢å¼ï¼‰
export const ApiUserRequestSchema = z.object({
  email: z.string(),
  first_name: z.string(),
  last_name: z.string(),
  bio: z.string().optional(),
  avatar_url: z.string().optional(),
})

export type ApiUserRequest = z.infer<typeof ApiUserRequestSchema>

// ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
export const ApiErrorResponseSchema = z.object({
  error: z.object({
    code: z.string(),
    message: z.string(),
    details: z.unknown().optional(),
  }),
})

export type ApiErrorResponse = z.infer<typeof ApiErrorResponseSchema>

export interface ApiClient {
  get<T>(url: string): Promise<{ data: T; status: number }>
  put<T>(url: string, data: unknown): Promise<{ data: T; status: number }>
  delete(url: string): Promise<{ status: number }>
}

export class ApiUserRepository implements UserRepository {
  constructor(private readonly apiClient: ApiClient) {}

  /**
   * ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å–å¾—
   * @param id - ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã®UserId
   * @returns ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®User
   */
  async findById(id: UserId): Promise<User | null> {
    try {
      const response = await this.apiClient.get<unknown>(
        `/users/${unwrapBrand(id)}`
      )
      
      // APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
      const validatedResponse = ApiUserResponseSchema.parse(response.data)
      
      // ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¸ã®å¤‰æ›
      return this.toDomainEntity(validatedResponse)
    } catch (error) {
      if (this.isNotFoundError(error)) {
        return null
      }
      throw new Error(`ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—ã‚¨ãƒ©ãƒ¼: ${this.extractErrorMessage(error)}`)
    }
  }

  /**
   * ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å–å¾—
   * @param email - ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã®Email
   * @returns ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®User
   */
  async findByEmail(email: Email): Promise<User | null> {
    try {
      const response = await this.apiClient.get<unknown>(
        `/users/by-email/${encodeURIComponent(unwrapBrand(email))}`
      )
      
      const validatedResponse = ApiUserResponseSchema.parse(response.data)
      return this.toDomainEntity(validatedResponse)
    } catch (error) {
      if (this.isNotFoundError(error)) {
        return null
      }
      throw new Error(`ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—ã‚¨ãƒ©ãƒ¼: ${this.extractErrorMessage(error)}`)
    }
  }

  /**
   * ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä¿å­˜
   * @param user - ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®User
   */
  async save(user: User): Promise<void> {
    try {
      const apiData = this.toApiRequest(user)
      
      await this.apiClient.put(`/users/${unwrapBrand(user.id)}`, apiData)
    } catch (error) {
      throw new Error(`ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¿å­˜ã‚¨ãƒ©ãƒ¼: ${this.extractErrorMessage(error)}`)
    }
  }

  /**
   * ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤
   * @param id - ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã®UserId
   */
  async delete(id: UserId): Promise<void> {
    try {
      await this.apiClient.delete(`/users/${unwrapBrand(id)}`)
    } catch (error) {
      throw new Error(`ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤ã‚¨ãƒ©ãƒ¼: ${this.extractErrorMessage(error)}`)
    }
  }

  /**
   * APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‹ã‚‰ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«å¤‰æ›
   * @param apiData - ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ¸ˆã¿APIãƒ¬ã‚¹ãƒãƒ³ã‚¹
   * @returns ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
   */
  private toDomainEntity(apiData: ApiUserResponse): User {
    return UserFactory.fromExisting({
      id: apiData.id,
      email: apiData.email,
      profile: {
        firstName: apiData.first_name,
        lastName: apiData.last_name,
        bio: apiData.bio || undefined,
        avatarUrl: apiData.avatar_url || undefined,
      },
      createdAt: apiData.created_at,
      updatedAt: apiData.updated_at,
    })
  }

  /**
   * ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‹ã‚‰APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¤‰æ›
   * @param user - ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
   * @returns APIãƒªã‚¯ã‚¨ã‚¹ãƒˆå½¢å¼
   */
  private toApiRequest(user: User): ApiUserRequest {
    const apiData: ApiUserRequest = {
      email: unwrapBrand(user.email),
      first_name: unwrapBrand(user.profile.firstName),
      last_name: unwrapBrand(user.profile.lastName),
    }

    // ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å‡¦ç†
    if (user.profile.bio) {
      apiData.bio = user.profile.bio
    }
    if (user.profile.avatarUrl) {
      apiData.avatar_url = user.profile.avatarUrl
    }

    return ApiUserRequestSchema.parse(apiData)
  }

  /**
   * 404ã‚¨ãƒ©ãƒ¼ã‹ã©ã†ã‹ã®åˆ¤å®š
   */
  private isNotFoundError(error: unknown): boolean {
    return (error as any)?.status === 404
  }

  /**
   * ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æŠ½å‡º
   */
  private extractErrorMessage(error: unknown): string {
    try {
      const apiError = ApiErrorResponseSchema.parse(error)
      return apiError.error.message
    } catch {
      return error instanceof Error ? error.message : 'ä¸æ˜ãªã‚¨ãƒ©ãƒ¼'
    }
  }
}
```

```typescript
// adapters/services/EmailNotificationService.ts
import { z } from 'zod'
import { NotificationService } from '../../use-cases/user/GetUserUseCase'
import { Email, unwrapBrand } from '../../entities/User'

// é€šçŸ¥ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¹ã‚­ãƒ¼ãƒ
export const NotificationRequestSchema = z.object({
  to: z.string().email(),
  subject: z.string().min(1),
  body: z.string().min(1),
  template: z.string().optional(),
  metadata: z.record(z.unknown()).optional(),
})

export type NotificationRequest = z.infer<typeof NotificationRequestSchema>

// é€šçŸ¥ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
export const NotificationResponseSchema = z.object({
  messageId: z.string(),
  status: z.enum(['sent', 'queued', 'failed']),
  sentAt: z.string().datetime(),
})

export type NotificationResponse = z.infer<typeof NotificationResponseSchema>

export interface EmailApiClient {
  sendEmail(request: NotificationRequest): Promise<NotificationResponse>
}

export class EmailNotificationService implements NotificationService {
  constructor(private readonly emailClient: EmailApiClient) {}

  /**
   * ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ã‚’é€ä¿¡
   * @param message - é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
   * @param recipient - ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã®Email
   * @throws Error é€ä¿¡ã‚¨ãƒ©ãƒ¼ã®å ´åˆ
   */
  async send(message: string, recipient: Email): Promise<void> {
    try {
      // é€šçŸ¥ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ä½œæˆã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
      const notificationRequest = NotificationRequestSchema.parse({
        to: unwrapBrand(recipient),
        subject: 'ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥',
        body: message,
        template: 'system-notification',
        metadata: {
          timestamp: new Date().toISOString(),
          system: 'study-github-agent',
        },
      })

      // ãƒ¡ãƒ¼ãƒ«é€ä¿¡
      const response = await this.emailClient.sendEmail(notificationRequest)
      
      // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
      const validatedResponse = NotificationResponseSchema.parse(response)

      // é€ä¿¡å¤±æ•—ã®å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ã‚‹
      if (validatedResponse.status === 'failed') {
        throw new Error('ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ')
      }

      console.log(`ãƒ¡ãƒ¼ãƒ«é€ä¿¡æˆåŠŸ: ${validatedResponse.messageId}`)
    } catch (error) {
      if (error instanceof z.ZodError) {
        throw new Error(`é€šçŸ¥ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼: ${error.message}`)
      }
      throw new Error(`ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚¨ãƒ©ãƒ¼: ${error instanceof Error ? error.message : 'ä¸æ˜ãªã‚¨ãƒ©ãƒ¼'}`)
    }
  }
}
```

```typescript
// adapters/presenters/UserPresenter.ts
import { z } from 'zod'
import { User, unwrapBrand, UserHelpers } from '../../entities/User'

// ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã‚¹ã‚­ãƒ¼ãƒ
export const UserViewModelSchema = z.object({
  id: z.string(),
  email: z.string(),
  fullName: z.string(),
  firstName: z.string(),
  lastName: z.string(),
  bio: z.string().optional(),
  avatarUrl: z.string().optional(),
  isAdmin: z.boolean(),
  memberSince: z.string(),
  lastUpdated: z.string(),
})

export type UserViewModel = z.infer<typeof UserViewModelSchema>

export class UserPresenter {
  /**
   * ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ‡ãƒ«ã«å¤‰æ›
   * @param user - ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
   * @returns ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ãƒ‡ãƒ¼ã‚¿
   */
  static present(user: User): UserViewModel {
    const viewModel: UserViewModel = {
      id: unwrapBrand(user.id),
      email: unwrapBrand(user.email),
      fullName: UserHelpers.getFullName(user),
      firstName: unwrapBrand(user.profile.firstName),
      lastName: unwrapBrand(user.profile.lastName),
      bio: user.profile.bio,
      avatarUrl: user.profile.avatarUrl,
      isAdmin: UserHelpers.isAdmin(user),
      memberSince: user.createdAt.toLocaleDateString('ja-JP'),
      lastUpdated: user.updatedAt.toLocaleDateString('ja-JP'),
    }

    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¦è¿”ã™
    return UserViewModelSchema.parse(viewModel)
  }

  /**
   * è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¹ãƒˆè¡¨ç¤ºç”¨å¤‰æ›
   * @param users - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆ
   * @returns ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ãƒ‡ãƒ¼ã‚¿ãƒªã‚¹ãƒˆ
   */
  static presentList(users: User[]): UserViewModel[] {
    return users.map(user => this.present(user))
  }

  /**
   * ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢çµæœã®è¡¨ç¤ºç”¨å¤‰æ›
   * @param users - æ¤œç´¢çµæœ
   * @param totalCount - ç·ä»¶æ•°
   * @returns æ¤œç´¢çµæœãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ãƒ‡ãƒ¼ã‚¿
   */
  static presentSearchResult(users: User[], totalCount: number) {
    const searchResultSchema = z.object({
      users: z.array(UserViewModelSchema),
      totalCount: z.number(),
      hasMore: z.boolean(),
    })

    const result = {
      users: this.presentList(users),
      totalCount,
      hasMore: users.length < totalCount,
    }

    return searchResultSchema.parse(result)
  }
}
```

### 4. Frameworks & Driversï¼ˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ»ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼‰
**è²¬å‹™**: Reactã€APIã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãªã©ã®å¤–éƒ¨ä¾å­˜

#### Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ´»ç”¨

```typescript
// frameworks/react/components/UserProfile.tsx
import React from 'react'
import { useQuery } from '@tanstack/react-query'
import { z } from 'zod'
import { GetUserUseCase } from '../../../use-cases/user/GetUserUseCase'
import { UserFactory } from '../../../entities/User'
import { UserPresenter, UserViewModel } from '../../../adapters/presenters/UserPresenter'

// ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚¹ã‚­ãƒ¼ãƒ
const UserProfilePropsSchema = z.object({
  userId: z.string(),
  getUserUseCase: z.custom<GetUserUseCase>(),
  onUserUpdate: z.function().args(z.custom<UserViewModel>()).returns(z.void()).optional(),
})

type UserProfileProps = z.infer<typeof UserProfilePropsSchema>

// ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
const ErrorDisplay: React.FC<{ error: Error }> = ({ error }) => (
  <div className="error-container" role="alert">
    <h3>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h3>
    <p>{error.message}</p>
    <button onClick={() => window.location.reload()}>
      å†èª­ã¿è¾¼ã¿
    </button>
  </div>
)

// ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
const LoadingDisplay: React.FC = () => (
  <div className="loading-container" aria-label="èª­ã¿è¾¼ã¿ä¸­">
    <div className="spinner" />
    <p>ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</p>
  </div>
)

// ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
const UserInfo: React.FC<{ user: UserViewModel }> = ({ user }) => (
  <div className="user-info">
    <div className="user-avatar">
      {user.avatarUrl ? (
        <img 
          src={user.avatarUrl} 
          alt={`${user.fullName}ã®ã‚¢ãƒã‚¿ãƒ¼`}
          className="avatar-image"
        />
      ) : (
        <div className="avatar-placeholder">
          {user.fullName.charAt(0)}
        </div>
      )}
    </div>
    
    <div className="user-details">
      <h2 className="user-name">{user.fullName}</h2>
      
      {user.isAdmin && (
        <span className="admin-badge" role="img" aria-label="ç®¡ç†è€…">
          ğŸ‘‘ ç®¡ç†è€…
        </span>
      )}
      
      <div className="user-meta">
        <p>
          <strong>ãƒ¡ãƒ¼ãƒ«:</strong>
          <a href={`mailto:${user.email}`}>{user.email}</a>
        </p>
        <p><strong>ç™»éŒ²æ—¥:</strong> {user.memberSince}</p>
        <p><strong>æœ€çµ‚æ›´æ–°:</strong> {user.lastUpdated}</p>
      </div>
      
      {user.bio && (
        <div className="user-bio">
          <h3>è‡ªå·±ç´¹ä»‹</h3>
          <p>{user.bio}</p>
        </div>
      )}
    </div>
  </div>
)

export const UserProfile: React.FC<UserProfileProps> = ({
  userId,
  getUserUseCase,
  onUserUpdate,
}) => {
  // ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆé–‹ç™ºæ™‚ã®ãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
  React.useEffect(() => {
    try {
      UserProfilePropsSchema.parse({ userId, getUserUseCase, onUserUpdate })
    } catch (error) {
      console.error('UserProfile ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚¨ãƒ©ãƒ¼:', error)
    }
  }, [userId, getUserUseCase, onUserUpdate])

  const { 
    data: result, 
    isLoading, 
    error,
    refetch 
  } = useQuery({
    queryKey: ['user', userId],
    queryFn: async () => {
      // ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
      const validUserId = UserFactory.createUserId(userId)
      
      // ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å®Ÿè¡Œ
      const userResult = await getUserUseCase.execute({ userId: validUserId })
      
      // ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã«å¤‰æ›
      const userViewModel = UserPresenter.present(userResult.user)
      
      return {
        user: userViewModel,
        lastAccessTime: userResult.lastAccessTime,
      }
    },
    retry: (failureCount, error) => {
      // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã¯ãƒªãƒˆãƒ©ã‚¤ã—ãªã„
      if (error instanceof z.ZodError) {
        return false
      }
      return failureCount < 3
    },
  })

  // ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°é€šçŸ¥
  React.useEffect(() => {
    if (result?.user && onUserUpdate) {
      onUserUpdate(result.user)
    }
  }, [result?.user, onUserUpdate])

  if (isLoading) {
    return <LoadingDisplay />
  }

  if (error) {
    return <ErrorDisplay error={error instanceof Error ? error : new Error('ä¸æ˜ãªã‚¨ãƒ©ãƒ¼')} />
  }

  if (!result) {
    return (
      <div className="no-user">
        <p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</p>
        <button onClick={() => refetch()}>å†è©¦è¡Œ</button>
      </div>
    )
  }

  return (
    <div className="user-profile" data-testid="user-profile">
      <UserInfo user={result.user} />
      
      <div className="last-access">
        <small>
          æœ€çµ‚ã‚¢ã‚¯ã‚»ã‚¹: {result.lastAccessTime.toLocaleString('ja-JP')}
        </small>
      </div>
    </div>
  )
}
```

```typescript
// frameworks/react/hooks/useUserForm.ts
import React from 'react'
import { z } from 'zod'
import { UserProfileSchema, UserFactory } from '../../../entities/User'
import { UpdateUserUseCase } from '../../../use-cases/user/UpdateUserUseCase'

// ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ã‚¹ã‚­ãƒ¼ãƒ
const UserFormDataSchema = z.object({
  firstName: z.string().min(1, 'åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),
  lastName: z.string().min(1, 'å§“ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),
  bio: z.string().max(500, 'è‡ªå·±ç´¹ä»‹ã¯500æ–‡å­—ä»¥ä¸‹ã§å…¥åŠ›ã—ã¦ãã ã•ã„').optional(),
  avatarUrl: z.string().url('æœ‰åŠ¹ãªURLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„').optional().or(z.literal('')),
})

type UserFormData = z.infer<typeof UserFormDataSchema>

// ãƒ•ã‚©ãƒ¼ãƒ çŠ¶æ…‹
interface FormState {
  data: UserFormData
  errors: Partial<Record<keyof UserFormData, string>>
  isValid: boolean
  isDirty: boolean
}

// ãƒ•ã‚©ãƒ¼ãƒ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
type FormAction = 
  | { type: 'SET_FIELD'; field: keyof UserFormData; value: string }
  | { type: 'SET_ERRORS'; errors: Partial<Record<keyof UserFormData, string>> }
  | { type: 'RESET'; initialData: UserFormData }
  | { type: 'VALIDATE' }

// ãƒ•ã‚©ãƒ¼ãƒ çŠ¶æ…‹ã®åˆæœŸå€¤
function getInitialState(initialData: UserFormData): FormState {
  return {
    data: initialData,
    errors: {},
    isValid: true,
    isDirty: false,
  }
}

// ãƒ•ã‚©ãƒ¼ãƒ çŠ¶æ…‹ã®ãƒªãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼
function formReducer(state: FormState, action: FormAction): FormState {
  switch (action.type) {
    case 'SET_FIELD':
      const newData = { ...state.data, [action.field]: action.value }
      return {
        ...state,
        data: newData,
        isDirty: true,
      }
    
    case 'SET_ERRORS':
      return {
        ...state,
        errors: action.errors,
        isValid: Object.keys(action.errors).length === 0,
      }
    
    case 'RESET':
      return getInitialState(action.initialData)
    
    case 'VALIDATE':
      try {
        UserFormDataSchema.parse(state.data)
        return {
          ...state,
          errors: {},
          isValid: true,
        }
      } catch (error) {
        if (error instanceof z.ZodError) {
          const errors: Partial<Record<keyof UserFormData, string>> = {}
          error.errors.forEach(err => {
            if (err.path.length > 0) {
              const field = err.path[0] as keyof UserFormData
              errors[field] = err.message
            }
          })
          return {
            ...state,
            errors,
            isValid: false,
          }
        }
        return state
      }
    
    default:
      return state
  }
}

export function useUserForm(
  initialData: UserFormData,
  updateUseCase: UpdateUserUseCase,
  userId: string
) {
  const [state, dispatch] = React.useReducer(
    formReducer,
    getInitialState(initialData)
  )
  
  const [isSubmitting, setIsSubmitting] = React.useState(false)
  const [submitError, setSubmitError] = React.useState<string | null>(null)

  // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ›´æ–°
  const setField = React.useCallback((field: keyof UserFormData, value: string) => {
    dispatch({ type: 'SET_FIELD', field, value })
  }, [])

  // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
  const validate = React.useCallback(() => {
    dispatch({ type: 'VALIDATE' })
  }, [])

  // ãƒ•ã‚©ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
  const reset = React.useCallback((newInitialData?: UserFormData) => {
    dispatch({ type: 'RESET', initialData: newInitialData || initialData })
  }, [initialData])

  // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡
  const submit = React.useCallback(async () => {
    // é€ä¿¡å‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    validate()
    
    if (!state.isValid) {
      return false
    }

    setIsSubmitting(true)
    setSubmitError(null)

    try {
      // ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã§ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
      const validUserId = UserFactory.createUserId(userId)
      
      // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ã®å¤‰æ›
      const profileUpdates = UserProfileSchema.partial().parse({
        firstName: UserFactory.createUserName(state.data.firstName),
        lastName: UserFactory.createUserName(state.data.lastName),
        bio: state.data.bio,
        avatarUrl: state.data.avatarUrl || undefined,
      })

      // ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å®Ÿè¡Œ
      await updateUseCase.execute({
        userId: validUserId,
        profileUpdates,
      })

      return true
    } catch (error) {
      const errorMessage = error instanceof Error ? error.message : 'æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ'
      setSubmitError(errorMessage)
      return false
    } finally {
      setIsSubmitting(false)
    }
  }, [state.isValid, state.data, userId, updateUseCase, validate])

  // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  React.useEffect(() => {
    if (state.isDirty) {
      const timer = setTimeout(validate, 300) // ãƒ‡ãƒã‚¦ãƒ³ã‚¹
      return () => clearTimeout(timer)
    }
  }, [state.data, state.isDirty, validate])

  return {
    // çŠ¶æ…‹
    data: state.data,
    errors: state.errors,
    isValid: state.isValid,
    isDirty: state.isDirty,
    isSubmitting,
    submitError,
    
    // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
    setField,
    validate,
    reset,
    submit,
  }
}
```

```typescript
// frameworks/react/providers/DIProvider.tsx
import React from 'react'
import { ApiClient } from '../../api/client'
import { ApiUserRepository } from '../../../adapters/repositories/ApiUserRepository'
import { EmailNotificationService } from '../../../adapters/services/EmailNotificationService'
import { GetUserUseCase } from '../../../use-cases/user/GetUserUseCase'
import { UpdateUserUseCase } from '../../../use-cases/user/UpdateUserUseCase'

// ä¾å­˜é–¢ä¿‚ã®å‹å®šç¾©
export interface Dependencies {
  getUserUseCase: GetUserUseCase
  updateUserUseCase: UpdateUserUseCase
}

// DIã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
const DIContext = React.createContext<Dependencies | null>(null)

// DIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
interface DIProviderProps {
  children: React.ReactNode
  apiBaseUrl?: string
}

export const DIProvider: React.FC<DIProviderProps> = ({ 
  children, 
  apiBaseUrl = process.env.REACT_APP_API_BASE_URL || 'http://localhost:3001'
}) => {
  const dependencies = React.useMemo(() => {
    // å¤–éƒ¨ä¾å­˜ã®æ§‹ç¯‰
    const apiClient = new ApiClient(apiBaseUrl)
    const emailClient = new EmailApiClient(apiClient) // ä»®æƒ³çš„ãªå®Ÿè£…
    
    // ãƒªãƒã‚¸ãƒˆãƒªã¨ã‚µãƒ¼ãƒ“ã‚¹
    const userRepository = new ApiUserRepository(apiClient)
    const notificationService = new EmailNotificationService(emailClient)
    
    // ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
    const getUserUseCase = new GetUserUseCase(userRepository, notificationService)
    const updateUserUseCase = new UpdateUserUseCase(userRepository, notificationService)
    
    return {
      getUserUseCase,
      updateUserUseCase,
    }
  }, [apiBaseUrl])

  return (
    <DIContext.Provider value={dependencies}>
      {children}
    </DIContext.Provider>
  )
}

// DIãƒ•ãƒƒã‚¯
export function useDependencies(): Dependencies {
  const context = React.useContext(DIContext)
  if (!context) {
    throw new Error('useDependencies must be used within DIProvider')
  }
  return context
}

// å€‹åˆ¥ãƒ•ãƒƒã‚¯
export function useGetUserUseCase(): GetUserUseCase {
  return useDependencies().getUserUseCase
}

export function useUpdateUserUseCase(): UpdateUserUseCase {
  return useDependencies().updateUserUseCase
}
```

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

### æ¨å¥¨æ§‹æˆ
```
src/
â”œâ”€â”€ entities/               # ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ¬ã‚¤ãƒ¤ãƒ¼
â”‚   â”œâ”€â”€ User.ts
â”‚   â”œâ”€â”€ Post.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ use-cases/              # ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãƒ¬ã‚¤ãƒ¤ãƒ¼
â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â”œâ”€â”€ GetUserUseCase.ts
â”‚   â”‚   â”œâ”€â”€ UpdateUserUseCase.ts
â”‚   â”‚   â””â”€â”€ DeleteUserUseCase.ts
â”‚   â””â”€â”€ post/
â”‚       â”œâ”€â”€ CreatePostUseCase.ts
â”‚       â””â”€â”€ GetPostListUseCase.ts
â”œâ”€â”€ adapters/               # ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”œâ”€â”€ ApiUserRepository.ts
â”‚   â”‚   â””â”€â”€ LocalStorageUserRepository.ts
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ EmailNotificationService.ts
â”‚   â”‚   â””â”€â”€ PushNotificationService.ts
â”‚   â””â”€â”€ presenters/
â”‚       â”œâ”€â”€ UserPresenter.ts
â”‚       â””â”€â”€ PostPresenter.ts
â”œâ”€â”€ frameworks/             # ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ»ãƒ‰ãƒ©ã‚¤ãƒãƒ¼
â”‚   â”œâ”€â”€ react/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ providers/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ client.ts
â”‚   â”‚   â””â”€â”€ endpoints.ts
â”‚   â””â”€â”€ storage/
â”‚       â””â”€â”€ localStorage.ts
â””â”€â”€ main.tsx               # ä¾å­˜é–¢ä¿‚æ³¨å…¥ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•
```

## ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã¨Zodã®å®Ÿè£…æ–¹é‡

### ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã®è¨­è¨ˆåŸå‰‡

#### 1. å‹å®‰å…¨æ€§ã®ç¢ºä¿
ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€åŒã˜ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ã§ã‚‚æ„å‘³ã®ç•°ãªã‚‹å€¤ã‚’åŒºåˆ¥ã§ãã¾ã™ã€‚

```typescript
// æ‚ªã„ä¾‹ï¼šãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ã®ã¿ä½¿ç”¨
function transferMoney(fromAccount: string, toAccount: string, amount: number) {
  // fromAccountã¨toAccountã‚’é–“é•ãˆã¦æ¸¡ã™ãƒªã‚¹ã‚¯ãŒã‚ã‚‹
}

// è‰¯ã„ä¾‹ï¼šãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ä½¿ç”¨
type AccountId = Brand<string, 'AccountId'>
type Amount = Brand<number, 'Amount'>

function transferMoney(fromAccount: AccountId, toAccount: AccountId, amount: Amount) {
  // å‹ãƒ¬ãƒ™ãƒ«ã§å¼•æ•°ã®é–“é•ã„ã‚’é˜²ã’ã‚‹
}
```

#### 2. Zodã‚¹ã‚­ãƒ¼ãƒã¨ã®çµ±åˆ
ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¨å‹å®‰å…¨æ€§ã‚’ä¸¡ç«‹ã•ã›ã‚‹è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼š

```typescript
// ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã¨ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã®ä¸€ä½“åŒ–
export const AccountIdSchema = createBrandedSchema(
  z.string()
    .min(8, 'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆIDã¯8æ–‡å­—ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™')
    .max(32, 'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆIDã¯32æ–‡å­—ä»¥ä¸‹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™')
    .regex(/^ACC[0-9A-Z]+$/, 'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆIDã¯ACC+è‹±æ•°å­—ã®å½¢å¼ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™'),
  'AccountId'
)

export const AmountSchema = createBrandedSchema(
  z.number()
    .positive('é‡‘é¡ã¯æ­£ã®æ•°ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™')
    .max(1000000, 'ä¸€åº¦ã«è»¢é€ã§ãã‚‹é‡‘é¡ã¯100ä¸‡å††ä»¥ä¸‹ã§ã™')
    .multipleOf(0.01, 'é‡‘é¡ã¯1å††å˜ä½ã§æŒ‡å®šã—ã¦ãã ã•ã„'),
  'Amount'
)
```

#### 3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æˆ¦ç•¥

```typescript
// ãƒ‰ãƒ¡ã‚¤ãƒ³å›ºæœ‰ã‚¨ãƒ©ãƒ¼ã®å®šç¾©
export class InvalidAccountIdError extends Error {
  constructor(value: string, validationErrors: string[]) {
    super(`ç„¡åŠ¹ãªã‚¢ã‚«ã‚¦ãƒ³ãƒˆID: ${value}\nè©³ç´°: ${validationErrors.join(', ')}`)
    this.name = 'InvalidAccountIdError'
  }
}

export class InvalidAmountError extends Error {
  constructor(value: number, validationErrors: string[]) {
    super(`ç„¡åŠ¹ãªé‡‘é¡: ${value}\nè©³ç´°: ${validationErrors.join(', ')}`)
    this.name = 'InvalidAmountError'
  }
}

// ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼é–¢æ•°ã§ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
export class TransferFactory {
  static createAccountId(value: string): AccountId {
    try {
      return AccountIdSchema.parse(value)
    } catch (error) {
      if (error instanceof z.ZodError) {
        throw new InvalidAccountIdError(
          value,
          error.errors.map(e => e.message)
        )
      }
      throw error
    }
  }

  static createAmount(value: number): Amount {
    try {
      return AmountSchema.parse(value)
    } catch (error) {
      if (error instanceof z.ZodError) {
        throw new InvalidAmountError(
          value,
          error.errors.map(e => e.message)
        )
      }
      throw error
    }
  }
}
```

### é«˜åº¦ãªZodãƒ‘ã‚¿ãƒ¼ãƒ³

#### 1. æ¡ä»¶ä»˜ããƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

```typescript
// ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
export const UserRegistrationSchema = z.object({
  userType: z.enum(['individual', 'business']),
  email: EmailSchema,
  profile: z.discriminatedUnion('userType', [
    z.object({
      userType: z.literal('individual'),
      firstName: UserNameSchema,
      lastName: UserNameSchema,
      birthDate: z.date().max(new Date(), 'ç”Ÿå¹´æœˆæ—¥ã¯ä»Šæ—¥ä»¥å‰ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™'),
    }),
    z.object({
      userType: z.literal('business'),
      companyName: z.string().min(1, 'ä¼šç¤¾åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),
      businessNumber: z.string().regex(/^\d{13}$/, 'æ³•äººç•ªå·ã¯13æ¡ã®æ•°å­—ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™'),
      representative: UserNameSchema,
    })
  ])
})
```

#### 2. ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚¿ãƒ¼

```typescript
// è¤‡é›‘ãªãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
export const BusinessHoursSchema = z.object({
  openTime: z.string().regex(/^([01]\d|2[0-3]):[0-5]\d$/, 'æ™‚åˆ»ã¯HH:MMå½¢å¼ã§å…¥åŠ›ã—ã¦ãã ã•ã„'),
  closeTime: z.string().regex(/^([01]\d|2[0-3]):[0-5]\d$/, 'æ™‚åˆ»ã¯HH:MMå½¢å¼ã§å…¥åŠ›ã—ã¦ãã ã•ã„'),
}).refine((data) => {
  const openMinutes = timeToMinutes(data.openTime)
  const closeMinutes = timeToMinutes(data.closeTime)
  return closeMinutes > openMinutes
}, {
  message: 'é–‰åº—æ™‚åˆ»ã¯é–‹åº—æ™‚åˆ»ã‚ˆã‚Šå¾Œã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™',
  path: ['closeTime']
})

function timeToMinutes(time: string): number {
  const [hours, minutes] = time.split(':').map(Number)
  return hours * 60 + minutes
}
```

#### 3. éåŒæœŸãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

```typescript
// ä¸€æ„æ€§ãƒã‚§ãƒƒã‚¯ãªã©ã®éåŒæœŸãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
export function createEmailUniqueSchema(checkEmailExists: (email: string) => Promise<boolean>) {
  return EmailSchema.refine(async (email) => {
    const exists = await checkEmailExists(unwrapBrand(email))
    return !exists
  }, {
    message: 'ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™'
  })
}

// ä½¿ç”¨ä¾‹
const EmailUniqueSchema = createEmailUniqueSchema(async (email) => {
  const user = await userRepository.findByEmail(email)
  return user !== null
})
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### 1. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚­ãƒ£ãƒƒã‚·ãƒ¥

```typescript
// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çµæœã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥
class ValidationCache {
  private cache = new Map<string, { result: any; timestamp: number }>()
  private readonly TTL = 5 * 60 * 1000 // 5åˆ†

  get<T>(key: string): T | null {
    const cached = this.cache.get(key)
    if (!cached) return null

    if (Date.now() - cached.timestamp > this.TTL) {
      this.cache.delete(key)
      return null
    }

    return cached.result
  }

  set<T>(key: string, result: T): void {
    this.cache.set(key, { result, timestamp: Date.now() })
  }
}

// ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä»˜ããƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼
export class CachedUserFactory {
  private static cache = new ValidationCache()

  static createUserId(value: string): UserId {
    const cacheKey = `userId:${value}`
    const cached = this.cache.get<UserId>(cacheKey)
    
    if (cached) return cached

    const result = UserIdSchema.parse(value)
    this.cache.set(cacheKey, result)
    return result
  }
}
```

#### 2. æ®µéšçš„ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

```typescript
// è»½ã„ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰é‡ã„ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¸
export const UserRegistrationStageSchema = {
  // ã‚¹ãƒ†ãƒ¼ã‚¸1: åŸºæœ¬å½¢å¼ãƒã‚§ãƒƒã‚¯ï¼ˆé«˜é€Ÿï¼‰
  basicFormat: z.object({
    email: z.string().email(),
    password: z.string().min(8),
  }),

  // ã‚¹ãƒ†ãƒ¼ã‚¸2: è¤‡é›‘ãªãƒ«ãƒ¼ãƒ«ãƒã‚§ãƒƒã‚¯ï¼ˆä¸­é€Ÿï¼‰
  businessRules: z.object({
    email: EmailSchema,
    password: z.string()
      .min(8, 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™')
      .regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/, 'å¤§æ–‡å­—ãƒ»å°æ–‡å­—ãƒ»æ•°å­—ã‚’å«ã‚€å¿…è¦ãŒã‚ã‚Šã¾ã™'),
  }),

  // ã‚¹ãƒ†ãƒ¼ã‚¸3: å¤–éƒ¨ãƒã‚§ãƒƒã‚¯ï¼ˆä½é€Ÿï¼‰
  externalValidation: z.object({
    email: createEmailUniqueSchema(checkEmailExists),
  }),
}

// æ®µéšçš„å®Ÿè¡Œ
export async function validateUserRegistration(data: unknown) {
  // ã‚¹ãƒ†ãƒ¼ã‚¸1
  const basicData = UserRegistrationStageSchema.basicFormat.parse(data)
  
  // ã‚¹ãƒ†ãƒ¼ã‚¸2
  const validatedData = UserRegistrationStageSchema.businessRules.parse(basicData)
  
  // ã‚¹ãƒ†ãƒ¼ã‚¸3ï¼ˆå¿…è¦ãªå ´åˆã®ã¿ï¼‰
  const finalData = await UserRegistrationStageSchema.externalValidation.parseAsync(validatedData)
  
  return finalData
}
```

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æˆ¦ç•¥

### ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã§ã®ã‚¨ãƒ©ãƒ¼è¨­è¨ˆ

#### 1. ã‚¨ãƒ©ãƒ¼éšå±¤ã®æ§‹ç¯‰

```typescript
// ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ã‚¯ãƒ©ã‚¹
export abstract class DomainError extends Error {
  abstract readonly code: string
  abstract readonly statusCode: number
  
  constructor(message: string, public readonly context?: Record<string, unknown>) {
    super(message)
    this.name = this.constructor.name
  }

  toJSON() {
    return {
      name: this.name,
      code: this.code,
      message: this.message,
      context: this.context,
    }
  }
}

// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
export class ValidationError extends DomainError {
  readonly code = 'VALIDATION_ERROR'
  readonly statusCode = 400

  constructor(
    message: string,
    public readonly validationErrors: Array<{ field: string; message: string }>,
    context?: Record<string, unknown>
  ) {
    super(message, context)
  }
}

// ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼
export class BusinessRuleError extends DomainError {
  readonly code = 'BUSINESS_RULE_VIOLATION'
  readonly statusCode = 422

  constructor(message: string, public readonly rule: string, context?: Record<string, unknown>) {
    super(message, context)
  }
}

// ãƒªã‚½ãƒ¼ã‚¹æœªç™ºè¦‹ã‚¨ãƒ©ãƒ¼
export class NotFoundError extends DomainError {
  readonly code = 'RESOURCE_NOT_FOUND'
  readonly statusCode = 404

  constructor(resource: string, identifier: string, context?: Record<string, unknown>) {
    super(`${resource}ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: ${identifier}`, context)
  }
}
```

#### 2. Zodã‚¨ãƒ©ãƒ¼ã‹ã‚‰ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ©ãƒ¼ã¸ã®å¤‰æ›

```typescript
export class ErrorMapper {
  static fromZodError(error: z.ZodError, context?: Record<string, unknown>): ValidationError {
    const validationErrors = error.errors.map(err => ({
      field: err.path.join('.'),
      message: err.message,
    }))

    return new ValidationError(
      'ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ',
      validationErrors,
      context
    )
  }

  static fromUnknownError(error: unknown, context?: Record<string, unknown>): DomainError {
    if (error instanceof z.ZodError) {
      return this.fromZodError(error, context)
    }

    if (error instanceof DomainError) {
      return error
    }

    if (error instanceof Error) {
      return new class extends DomainError {
        readonly code = 'UNKNOWN_ERROR'
        readonly statusCode = 500
      }(error.message, context)
    }

    return new class extends DomainError {
      readonly code = 'UNKNOWN_ERROR'
      readonly statusCode = 500
    }('ä¸æ˜ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ', context)
  }
}
```

#### 3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

```typescript
// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
export class CreateUserUseCase {
  async execute(input: unknown): Promise<User> {
    try {
      // å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
      const validatedInput = CreateUserInputSchema.parse(input)
      
      // ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ãƒã‚§ãƒƒã‚¯
      await this.validateBusinessRules(validatedInput)
      
      // ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ä½œæˆ
      const user = UserFactory.create(validatedInput)
      
      // ä¿å­˜
      await this.userRepository.save(user)
      
      return user
    } catch (error) {
      // ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ©ãƒ¼ã«çµ±ä¸€
      const domainError = ErrorMapper.fromUnknownError(error, {
        useCase: 'CreateUserUseCase',
        input: JSON.stringify(input),
        timestamp: new Date().toISOString(),
      })
      
      // ãƒ­ã‚°å‡ºåŠ›
      this.logger.error('ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆã‚¨ãƒ©ãƒ¼', {
        error: domainError.toJSON(),
        stackTrace: domainError.stack,
      })
      
      throw domainError
    }
  }

  private async validateBusinessRules(input: CreateUserInput): Promise<void> {
    // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®é‡è¤‡ãƒã‚§ãƒƒã‚¯
    const existingUser = await this.userRepository.findByEmail(input.email)
    if (existingUser) {
      throw new BusinessRuleError(
        'ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™',
        'email_uniqueness',
        { email: unwrapBrand(input.email) }
      )
    }

    // ãã®ä»–ã®ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«...
  }
}
```

## ä¾å­˜é–¢ä¿‚æ³¨å…¥

### DIã‚³ãƒ³ãƒ†ãƒŠã®å®Ÿè£…

#### 1. å‹å®‰å…¨ãªDIã‚³ãƒ³ãƒ†ãƒŠ

```typescript
// di/container.ts
import { z } from 'zod'

// ä¾å­˜é–¢ä¿‚ã®å‹å®šç¾©
export interface Dependencies {
  // Repositories
  userRepository: UserRepository
  
  // Services
  notificationService: NotificationService
  emailService: EmailService
  
  // Use Cases
  getUserUseCase: GetUserUseCase
  updateUserUseCase: UpdateUserUseCase
  createUserUseCase: CreateUserUseCase
  
  // External Services
  apiClient: ApiClient
  logger: Logger
}

// DIãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆå‹å®‰å…¨ãªã‚­ãƒ¼ï¼‰
export const DITokens = {
  UserRepository: Symbol('UserRepository'),
  NotificationService: Symbol('NotificationService'),
  EmailService: Symbol('EmailService'),
  GetUserUseCase: Symbol('GetUserUseCase'),
  UpdateUserUseCase: Symbol('UpdateUserUseCase'),
  CreateUserUseCase: Symbol('CreateUserUseCase'),
  ApiClient: Symbol('ApiClient'),
  Logger: Symbol('Logger'),
} as const

type DIToken = typeof DITokens[keyof typeof DITokens]

// ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†
export enum Lifecycle {
  Singleton = 'singleton',
  Transient = 'transient',
  Scoped = 'scoped',
}

interface ServiceDescriptor<T = any> {
  token: DIToken
  factory: (container: DIContainer) => T
  lifecycle: Lifecycle
  dependencies?: DIToken[]
}

export class DIContainer {
  private services = new Map<DIToken, ServiceDescriptor>()
  private instances = new Map<DIToken, any>()
  private scoped = new Map<DIToken, any>()

  /**
   * ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç™»éŒ²ã—ã¾ã™
   */
  register<T>(
    token: DIToken,
    factory: (container: DIContainer) => T,
    lifecycle: Lifecycle = Lifecycle.Singleton,
    dependencies: DIToken[] = []
  ): void {
    this.services.set(token, {
      token,
      factory,
      lifecycle,
      dependencies,
    })
  }

  /**
   * ã‚µãƒ¼ãƒ“ã‚¹ã‚’è§£æ±ºã—ã¾ã™
   */
  resolve<T>(token: DIToken): T {
    const descriptor = this.services.get(token)
    if (!descriptor) {
      throw new Error(`Service not registered: ${token.toString()}`)
    }

    switch (descriptor.lifecycle) {
      case Lifecycle.Singleton:
        return this.resolveSingleton(descriptor)
      
      case Lifecycle.Transient:
        return this.resolveTransient(descriptor)
      
      case Lifecycle.Scoped:
        return this.resolveScoped(descriptor)
      
      default:
        throw new Error(`Unknown lifecycle: ${descriptor.lifecycle}`)
    }
  }

  /**
   * ã‚¹ã‚³ãƒ¼ãƒ—ã‚’é–‹å§‹ã—ã¾ã™
   */
  beginScope(): DIScope {
    return new DIScope(this)
  }

  /**
   * ä¾å­˜é–¢ä¿‚ã‚°ãƒ©ãƒ•ã®æ¤œè¨¼
   */
  validateDependencyGraph(): void {
    const visited = new Set<DIToken>()
    const visiting = new Set<DIToken>()

    for (const token of this.services.keys()) {
      this.validateDependencyGraphRecursive(token, visited, visiting)
    }
  }

  private resolveSingleton<T>(descriptor: ServiceDescriptor<T>): T {
    if (!this.instances.has(descriptor.token)) {
      const instance = descriptor.factory(this)
      this.instances.set(descriptor.token, instance)
    }
    return this.instances.get(descriptor.token)
  }

  private resolveTransient<T>(descriptor: ServiceDescriptor<T>): T {
    return descriptor.factory(this)
  }

  private resolveScoped<T>(descriptor: ServiceDescriptor<T>): T {
    if (!this.scoped.has(descriptor.token)) {
      const instance = descriptor.factory(this)
      this.scoped.set(descriptor.token, instance)
    }
    return this.scoped.get(descriptor.token)
  }

  private validateDependencyGraphRecursive(
    token: DIToken,
    visited: Set<DIToken>,
    visiting: Set<DIToken>
  ): void {
    if (visiting.has(token)) {
      throw new Error(`Circular dependency detected: ${token.toString()}`)
    }

    if (visited.has(token)) {
      return
    }

    visiting.add(token)

    const descriptor = this.services.get(token)
    if (descriptor?.dependencies) {
      for (const dependency of descriptor.dependencies) {
        this.validateDependencyGraphRecursive(dependency, visited, visiting)
      }
    }

    visiting.delete(token)
    visited.add(token)
  }
}

// ã‚¹ã‚³ãƒ¼ãƒ—ç®¡ç†
export class DIScope {
  constructor(private readonly container: DIContainer) {}

  resolve<T>(token: DIToken): T {
    return this.container.resolve<T>(token)
  }

  dispose(): void {
    // ã‚¹ã‚³ãƒ¼ãƒ—æ¸ˆã¿ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
    this.container['scoped'].clear()
  }
}
```

#### 2. ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­å®š

```typescript
// di/modules/infrastructure.module.ts
export function registerInfrastructureModule(container: DIContainer): void {
  // API Client
  container.register(
    DITokens.ApiClient,
    () => new ApiClient(
      process.env.REACT_APP_API_BASE_URL || 'http://localhost:3001'
    ),
    Lifecycle.Singleton
  )

  // Logger
  container.register(
    DITokens.Logger,
    () => new ConsoleLogger(),
    Lifecycle.Singleton
  )
}

// di/modules/repository.module.ts
export function registerRepositoryModule(container: DIContainer): void {
  // User Repository
  container.register(
    DITokens.UserRepository,
    (c) => new ApiUserRepository(c.resolve(DITokens.ApiClient)),
    Lifecycle.Singleton,
    [DITokens.ApiClient]
  )
}

// di/modules/service.module.ts
export function registerServiceModule(container: DIContainer): void {
  // Notification Service
  container.register(
    DITokens.NotificationService,
    (c) => new EmailNotificationService(c.resolve(DITokens.EmailService)),
    Lifecycle.Singleton,
    [DITokens.EmailService]
  )

  // Email Service
  container.register(
    DITokens.EmailService,
    (c) => new EmailService(c.resolve(DITokens.ApiClient)),
    Lifecycle.Singleton,
    [DITokens.ApiClient]
  )
}

// di/modules/use-case.module.ts
export function registerUseCaseModule(container: DIContainer): void {
  // Get User Use Case
  container.register(
    DITokens.GetUserUseCase,
    (c) => new GetUserUseCase(
      c.resolve(DITokens.UserRepository),
      c.resolve(DITokens.NotificationService)
    ),
    Lifecycle.Transient, // ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¯æ¯å›æ–°ã—ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
    [DITokens.UserRepository, DITokens.NotificationService]
  )

  // Update User Use Case
  container.register(
    DITokens.UpdateUserUseCase,
    (c) => new UpdateUserUseCase(
      c.resolve(DITokens.UserRepository),
      c.resolve(DITokens.NotificationService)
    ),
    Lifecycle.Transient,
    [DITokens.UserRepository, DITokens.NotificationService]
  )
}
```

#### 3. Reactçµ±åˆ

```typescript
// frameworks/react/providers/DIProvider.tsx
import React from 'react'
import { DIContainer, DITokens } from '../../../di/container'
import { 
  registerInfrastructureModule,
  registerRepositoryModule,
  registerServiceModule,
  registerUseCaseModule 
} from '../../../di/modules'

// DIã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
const DIContext = React.createContext<DIContainer | null>(null)

interface DIProviderProps {
  children: React.ReactNode
  config?: {
    apiBaseUrl?: string
    logLevel?: string
  }
}

export const DIProvider: React.FC<DIProviderProps> = ({ 
  children, 
  config = {} 
}) => {
  const container = React.useMemo(() => {
    const container = new DIContainer()
    
    // è¨­å®šã®æ³¨å…¥
    process.env.REACT_APP_API_BASE_URL = config.apiBaseUrl || process.env.REACT_APP_API_BASE_URL
    
    // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç™»éŒ²
    registerInfrastructureModule(container)
    registerRepositoryModule(container)
    registerServiceModule(container)
    registerUseCaseModule(container)
    
    // ä¾å­˜é–¢ä¿‚ã‚°ãƒ©ãƒ•ã®æ¤œè¨¼
    container.validateDependencyGraph()
    
    return container
  }, [config])

  return (
    <DIContext.Provider value={container}>
      {children}
    </DIContext.Provider>
  )
}

// DIãƒ•ãƒƒã‚¯
export function useDI(): DIContainer {
  const container = React.useContext(DIContext)
  if (!container) {
    throw new Error('useDI must be used within DIProvider')
  }
  return container
}

// å€‹åˆ¥ã‚µãƒ¼ãƒ“ã‚¹å–å¾—ãƒ•ãƒƒã‚¯
export function useService<T>(token: DIToken): T {
  const container = useDI()
  return React.useMemo(() => container.resolve<T>(token), [container, token])
}

// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å°‚ç”¨ãƒ•ãƒƒã‚¯
export function useGetUserUseCase() {
  return useService<GetUserUseCase>(DITokens.GetUserUseCase)
}

export function useUpdateUserUseCase() {
  return useService<UpdateUserUseCase>(DITokens.UpdateUserUseCase)
}
```

#### 4. ãƒ†ã‚¹ãƒˆç”¨DIã‚³ãƒ³ãƒ†ãƒŠ

```typescript
// test-utils/test-container.ts
export function createTestContainer(): DIContainer {
  const container = new DIContainer()

  // ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒ“ã‚¹ã®ç™»éŒ²
  container.register(
    DITokens.UserRepository,
    () => new MockUserRepository(),
    Lifecycle.Singleton
  )

  container.register(
    DITokens.NotificationService,
    () => new MockNotificationService(),
    Lifecycle.Singleton
  )

  container.register(
    DITokens.GetUserUseCase,
    (c) => new GetUserUseCase(
      c.resolve(DITokens.UserRepository),
      c.resolve(DITokens.NotificationService)
    ),
    Lifecycle.Transient,
    [DITokens.UserRepository, DITokens.NotificationService]
  )

  return container
}

// ãƒ†ã‚¹ãƒˆç”¨ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
export const TestDIProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const container = React.useMemo(() => createTestContainer(), [])
  
  return (
    <DIContext.Provider value={container}>
      {children}
    </DIContext.Provider>
  )
}
```

#### 5. ç’°å¢ƒåˆ¥è¨­å®š

```typescript
// di/config/development.ts
export const developmentConfig = {
  apiBaseUrl: 'http://localhost:3001',
  logLevel: 'debug',
  enableMocks: true,
}

// di/config/production.ts
export const productionConfig = {
  apiBaseUrl: process.env.REACT_APP_API_BASE_URL,
  logLevel: 'error',
  enableMocks: false,
}

// di/config/test.ts
export const testConfig = {
  apiBaseUrl: 'http://localhost:3001',
  logLevel: 'silent',
  enableMocks: true,
}

// ç’°å¢ƒã«å¿œã˜ãŸè¨­å®šã®é¸æŠ
export function getConfig() {
  switch (process.env.NODE_ENV) {
    case 'development':
      return developmentConfig
    case 'production':
      return productionConfig
    case 'test':
      return testConfig
    default:
      return developmentConfig
  }
}
```

### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•æ™‚ã®è¨­å®š

```typescript
// main.tsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import { DIProvider } from './frameworks/react/providers/DIProvider'
import { getConfig } from './di/config'
import App from './App'

const config = getConfig()

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <DIProvider config={config}>
      <App />
    </DIProvider>
  </React.StrictMode>
)
```

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã¨Zodãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ´»ç”¨ã—ãŸãƒ†ã‚¹ãƒˆè¨­è¨ˆ

#### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

```typescript
// entities/User.test.ts
import { describe, test, expect } from 'vitest'
import { z } from 'zod'
import { 
  UserFactory, 
  UserIdSchema, 
  EmailSchema, 
  UserNameSchema,
  UserHelpers 
} from './User'

describe('User ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£', () => {
  describe('ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³', () => {
    test('æœ‰åŠ¹ãªUserIdãŒä½œæˆã•ã‚Œã‚‹', () => {
      const validId = 'user123'
      const userId = UserFactory.createUserId(validId)
      
      expect(userId).toBeDefined()
      expect(typeof userId).toBe('string')
    })

    test('ç„¡åŠ¹ãªUserIdã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹', () => {
      const invalidIds = ['ab', '', '123!@#', ' spaces ']
      
      invalidIds.forEach(invalidId => {
        expect(() => UserFactory.createUserId(invalidId))
          .toThrow(z.ZodError)
      })
    })

    test('æœ‰åŠ¹ãªEmailãŒä½œæˆã•ã‚Œã‚‹', () => {
      const validEmail = 'test@example.com'
      const email = UserFactory.createEmail(validEmail)
      
      expect(email).toBeDefined()
    })

    test('ç„¡åŠ¹ãªEmailã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹', () => {
      const invalidEmails = ['invalid', '@invalid.com', 'test@', 'test@.com']
      
      invalidEmails.forEach(invalidEmail => {
        expect(() => UserFactory.createEmail(invalidEmail))
          .toThrow(z.ZodError)
      })
    })
  })

  describe('Userã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ä½œæˆ', () => {
    test('æœ‰åŠ¹ãªãƒ‡ãƒ¼ã‚¿ã§UserãŒä½œæˆã•ã‚Œã‚‹', () => {
      const validUserData = {
        id: 'user123',
        email: 'test@example.com',
        profile: {
          firstName: 'å¤ªéƒ',
          lastName: 'ç”°ä¸­',
          bio: 'Hello, world!',
        },
        createdAt: new Date(),
        updatedAt: new Date(),
      }

      const user = UserFactory.create(validUserData)
      
      expect(user).toBeDefined()
      expect(user.id).toBeDefined()
      expect(user.email).toBeDefined()
    })

    test('ç„¡åŠ¹ãªãƒ‡ãƒ¼ã‚¿ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹', () => {
      const invalidUserData = {
        id: 'ab', // çŸ­ã™ãã‚‹
        email: 'invalid-email',
        profile: {
          firstName: '',
          lastName: '',
        },
        createdAt: new Date(),
        updatedAt: new Date(),
      }

      expect(() => UserFactory.create(invalidUserData))
        .toThrow(z.ZodError)
    })
  })

  describe('UserHelpers', () => {
    const testUser = UserFactory.create({
      id: 'user123',
      email: 'test@example.com',
      profile: {
        firstName: 'å¤ªéƒ',
        lastName: 'ç”°ä¸­',
      },
      createdAt: new Date(),
      updatedAt: new Date(),
    })

    test('ãƒ•ãƒ«ãƒãƒ¼ãƒ ãŒæ­£ã—ãå–å¾—ã•ã‚Œã‚‹', () => {
      const fullName = UserHelpers.getFullName(testUser)
      expect(fullName).toBe('å¤ªéƒ ç”°ä¸­')
    })

    test('ç®¡ç†è€…åˆ¤å®šãŒæ­£ã—ãå‹•ä½œã™ã‚‹', () => {
      const adminUser = UserFactory.create({
        ...testUser,
        email: 'admin@admin.example.com',
      })
      
      expect(UserHelpers.isAdmin(adminUser)).toBe(true)
      expect(UserHelpers.isAdmin(testUser)).toBe(false)
    })
  })
})
```

```typescript
// use-cases/user/GetUserUseCase.test.ts
import { describe, test, expect, beforeEach, vi } from 'vitest'
import { z } from 'zod'
import { GetUserUseCase, UserNotFoundError } from './GetUserUseCase'
import { UserFactory } from '../../entities/User'
import type { UserRepository, NotificationService } from './GetUserUseCase'

// ãƒ¢ãƒƒã‚¯ãƒªãƒã‚¸ãƒˆãƒª
class MockUserRepository implements UserRepository {
  private users = new Map()

  async findById(id: any) {
    return this.users.get(id) || null
  }

  async findByEmail(email: any) {
    return Array.from(this.users.values()).find(user => user.email === email) || null
  }

  async save(user: any) {
    this.users.set(user.id, user)
  }

  async delete(id: any) {
    this.users.delete(id)
  }

  // ãƒ†ã‚¹ãƒˆç”¨ãƒ˜ãƒ«ãƒ‘ãƒ¼
  setUser(user: any) {
    if (user) {
      this.users.set(user.id, user)
    }
  }

  clear() {
    this.users.clear()
  }
}

// ãƒ¢ãƒƒã‚¯é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹
class MockNotificationService implements NotificationService {
  public sentNotifications: Array<{ message: string; recipient: any }> = []

  async send(message: string, recipient: any) {
    this.sentNotifications.push({ message, recipient })
  }

  clear() {
    this.sentNotifications = []
  }
}

describe('GetUserUseCase', () => {
  let useCase: GetUserUseCase
  let mockRepository: MockUserRepository
  let mockNotificationService: MockNotificationService

  beforeEach(() => {
    mockRepository = new MockUserRepository()
    mockNotificationService = new MockNotificationService()
    useCase = new GetUserUseCase(mockRepository, mockNotificationService)
  })

  const createTestUser = () => UserFactory.create({
    id: 'test-user-123',
    email: 'test@example.com',
    profile: {
      firstName: 'å¤ªéƒ',
      lastName: 'ç”°ä¸­',
      bio: 'ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã™',
    },
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-01-01'),
  })

  describe('æ­£å¸¸ç³»', () => {
    test('å­˜åœ¨ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ­£ã—ãå–å¾—ã—ã€é€šçŸ¥ã‚’é€ä¿¡ã™ã‚‹', async () => {
      // Arrange
      const testUser = createTestUser()
      mockRepository.setUser(testUser)

      const input = {
        userId: UserFactory.createUserId('test-user-123')
      }

      // Act
      const result = await useCase.execute(input)

      // Assert
      expect(result.user).toEqual(testUser)
      expect(result.lastAccessTime).toBeInstanceOf(Date)
      expect(mockNotificationService.sentNotifications).toHaveLength(1)
      expect(mockNotificationService.sentNotifications[0].message)
        .toBe('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒé–²è¦§ã•ã‚Œã¾ã—ãŸ')
    })

    test('å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£ã—ãå‹•ä½œã™ã‚‹', async () => {
      // Arrange
      const testUser = createTestUser()
      mockRepository.setUser(testUser)

      const validInput = {
        userId: 'test-user-123' // æ–‡å­—åˆ—ã§ã‚‚è‡ªå‹•å¤‰æ›ã•ã‚Œã‚‹
      }

      // Act
      const result = await useCase.execute(validInput)

      // Assert
      expect(result.user).toEqual(testUser)
    })
  })

  describe('ç•°å¸¸ç³»', () => {
    test('å­˜åœ¨ã—ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§UserNotFoundErrorãŒç™ºç”Ÿã™ã‚‹', async () => {
      // Arrange
      const input = {
        userId: UserFactory.createUserId('non-existent-user')
      }

      // Act & Assert
      await expect(useCase.execute(input))
        .rejects
        .toThrow(UserNotFoundError)
    })

    test('ç„¡åŠ¹ãªå…¥åŠ›ã§ZodErrorãŒç™ºç”Ÿã™ã‚‹', async () => {
      // Arrange
      const invalidInput = {
        userId: 'ab' // çŸ­ã™ãã‚‹
      }

      // Act & Assert
      await expect(useCase.execute(invalidInput))
        .rejects
        .toThrow(z.ZodError)
    })

    test('å‰Šé™¤ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹', async () => {
      // Arrange
      const deletedUser = UserFactory.create({
        id: 'deleted-user',
        email: 'deleted@example.com',
        profile: {
          firstName: '', // ç©ºã®åå‰ï¼ˆå‰Šé™¤æ¸ˆã¿æ‰±ã„ï¼‰
          lastName: '',
        },
        createdAt: new Date(),
        updatedAt: new Date(),
      })
      mockRepository.setUser(deletedUser)

      const input = {
        userId: UserFactory.createUserId('deleted-user')
      }

      // Act & Assert
      await expect(useCase.execute(input))
        .rejects
        .toThrow('UserAccessDeniedError')
    })
  })

  describe('ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³', () => {
    test('å‡ºåŠ›ã‚¹ã‚­ãƒ¼ãƒã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£ã—ãå‹•ä½œã™ã‚‹', async () => {
      // Arrange
      const testUser = createTestUser()
      mockRepository.setUser(testUser)

      const input = {
        userId: UserFactory.createUserId('test-user-123')
      }

      // Act
      const result = await useCase.execute(input)

      // Assert
      expect(result).toHaveProperty('user')
      expect(result).toHaveProperty('lastAccessTime')
      expect(result.lastAccessTime).toBeInstanceOf(Date)
    })
  })
})
```

#### çµ±åˆãƒ†ã‚¹ãƒˆ

```typescript
// adapters/repositories/ApiUserRepository.integration.test.ts
import { describe, test, expect, beforeEach, afterEach } from 'vitest'
import { setupServer } from 'msw/node'
import { http, HttpResponse } from 'msw'
import { ApiUserRepository } from './ApiUserRepository'
import { UserFactory } from '../../entities/User'
import { MockApiClient } from '../__mocks__/MockApiClient'

// MSWã‚µãƒ¼ãƒãƒ¼ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
const handlers = [
  http.get('/users/:id', ({ params }) => {
    const userId = params.id
    
    if (userId === 'test-user-123') {
      return HttpResponse.json({
        id: 'test-user-123',
        email: 'test@example.com',
        first_name: 'å¤ªéƒ',
        last_name: 'ç”°ä¸­',
        bio: 'ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã™',
        avatar_url: null,
        created_at: '2024-01-01T00:00:00Z',
        updated_at: '2024-01-01T00:00:00Z',
        is_active: true,
      })
    }
    
    return new HttpResponse(null, { status: 404 })
  }),

  http.put('/users/:id', async ({ request, params }) => {
    const userId = params.id
    const body = await request.json()
    
    return HttpResponse.json({
      id: userId,
      ...body,
      updated_at: new Date().toISOString(),
    })
  }),
]

const server = setupServer(...handlers)

describe('ApiUserRepository çµ±åˆãƒ†ã‚¹ãƒˆ', () => {
  let repository: ApiUserRepository
  let mockClient: MockApiClient

  beforeEach(() => {
    server.listen()
    mockClient = new MockApiClient('http://localhost:3001')
    repository = new ApiUserRepository(mockClient)
  })

  afterEach(() => {
    server.resetHandlers()
  })

  afterAll(() => {
    server.close()
  })

  describe('findById', () => {
    test('å­˜åœ¨ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ­£ã—ãå–å¾—ã—ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«å¤‰æ›ã™ã‚‹', async () => {
      // Arrange
      const userId = UserFactory.createUserId('test-user-123')

      // Act
      const user = await repository.findById(userId)

      // Assert
      expect(user).toBeDefined()
      expect(user!.id).toBe(userId)
      expect(user!.email).toBeDefined()
      expect(user!.profile.firstName).toBeDefined()
      expect(user!.createdAt).toBeInstanceOf(Date)
    })

    test('å­˜åœ¨ã—ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§nullã‚’è¿”ã™', async () => {
      // Arrange
      const userId = UserFactory.createUserId('non-existent')

      // Act
      const user = await repository.findById(userId)

      // Assert
      expect(user).toBeNull()
    })
  })

  describe('save', () => {
    test('ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ­£ã—ãä¿å­˜ã™ã‚‹', async () => {
      // Arrange
      const user = UserFactory.create({
        id: 'save-test-user',
        email: 'save@example.com',
        profile: {
          firstName: 'ä¿å­˜',
          lastName: 'ãƒ†ã‚¹ãƒˆ',
        },
        createdAt: new Date(),
        updatedAt: new Date(),
      })

      // Act & Assertï¼ˆã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãªã„ã“ã¨ã‚’ç¢ºèªï¼‰
      await expect(repository.save(user)).resolves.not.toThrow()
    })
  })

  describe('ãƒ‡ãƒ¼ã‚¿å¤‰æ›', () => {
    test('APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‹ã‚‰ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¸ã®å¤‰æ›ãŒæ­£ã—ãå‹•ä½œã™ã‚‹', async () => {
      // Arrange
      const userId = UserFactory.createUserId('test-user-123')

      // Act
      const user = await repository.findById(userId)

      // Assert
      expect(user).toBeDefined()
      
      // ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã®æ¤œè¨¼
      expect(() => UserFactory.createUserId(user!.id as string)).not.toThrow()
      expect(() => UserFactory.createEmail(user!.email as string)).not.toThrow()
      
      // ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®æ¤œè¨¼
      expect(user!.profile.firstName).toBe('å¤ªéƒ')
      expect(user!.profile.lastName).toBe('ç”°ä¸­')
      expect(user!.profile.bio).toBe('ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã™')
    })
  })
})
```

#### E2Eãƒ†ã‚¹ãƒˆ

```typescript
// frameworks/react/components/UserProfile.e2e.test.ts
import { test, expect } from '@playwright/test'
import { setupTestDatabase, cleanupTestDatabase } from '../../../test-utils/database'
import { createTestUser } from '../../../test-utils/factories'

test.describe('UserProfile E2E', () => {
  test.beforeEach(async () => {
    await setupTestDatabase()
  })

  test.afterEach(async () => {
    await cleanupTestDatabase()
  })

  test('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
    // Arrange
    const testUser = await createTestUser({
      id: 'e2e-test-user',
      email: 'e2e@example.com',
      profile: {
        firstName: 'E2E',
        lastName: 'ãƒ†ã‚¹ãƒˆ',
        bio: 'E2Eãƒ†ã‚¹ãƒˆç”¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã™',
      },
    })

    // Act
    await page.goto(`/users/${testUser.id}`)

    // Assert
    await expect(page.getByTestId('user-profile')).toBeVisible()
    await expect(page.getByText('E2E ãƒ†ã‚¹ãƒˆ')).toBeVisible()
    await expect(page.getByText('e2e@example.com')).toBeVisible()
    await expect(page.getByText('E2Eãƒ†ã‚¹ãƒˆç”¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã™')).toBeVisible()
  })

  test('å­˜åœ¨ã—ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
    // Act
    await page.goto('/users/non-existent-user')

    // Assert
    await expect(page.getByText('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“')).toBeVisible()
    await expect(page.getByRole('button', { name: 'å†è©¦è¡Œ' })).toBeVisible()
  })

  test('ç®¡ç†è€…ãƒãƒƒã‚¸ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
    // Arrange
    const adminUser = await createTestUser({
      id: 'admin-user',
      email: 'admin@admin.example.com',
      profile: {
        firstName: 'ç®¡ç†è€…',
        lastName: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼',
      },
    })

    // Act
    await page.goto(`/users/${adminUser.id}`)

    // Assert
    await expect(page.getByText('ğŸ‘‘ ç®¡ç†è€…')).toBeVisible()
  })

  test('ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ãŒé©åˆ‡ã«å‡¦ç†ã•ã‚Œã‚‹', async ({ page }) => {
    // Act - ç„¡åŠ¹ãªãƒ¦ãƒ¼ã‚¶ãƒ¼IDã§ã‚¢ã‚¯ã‚»ã‚¹
    await page.goto('/users/ab') // çŸ­ã™ãã‚‹ID

    // Assert
    await expect(page.getByText('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ')).toBeVisible()
  })
})
```

#### ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

```typescript
// test-utils/factories.ts
import { UserFactory } from '../entities/User'

export function createTestUser(overrides: Partial<any> = {}) {
  const defaultUser = {
    id: 'test-user-' + Math.random().toString(36).substr(2, 9),
    email: `test-${Date.now()}@example.com`,
    profile: {
      firstName: 'ãƒ†ã‚¹ãƒˆ',
      lastName: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼',
      bio: 'ãƒ†ã‚¹ãƒˆç”¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã™',
    },
    createdAt: new Date(),
    updatedAt: new Date(),
  }

  return UserFactory.create({
    ...defaultUser,
    ...overrides,
  })
}

export function createTestUserId(suffix = '') {
  return UserFactory.createUserId(`test-user-${suffix || Math.random().toString(36).substr(2, 9)}`)
}

export function createTestEmail(domain = 'example.com') {
  return UserFactory.createEmail(`test-${Date.now()}@${domain}`)
}
```

```typescript
// test-utils/validation-helpers.ts
import { z } from 'zod'

/**
 * Zodã‚¨ãƒ©ãƒ¼ã®ãƒ†ã‚¹ãƒˆç”¨ãƒ˜ãƒ«ãƒ‘ãƒ¼
 */
export function expectZodError(
  fn: () => unknown,
  expectedErrors: Array<{ path: string; message: string }>
) {
  try {
    fn()
    throw new Error('Expected ZodError to be thrown')
  } catch (error) {
    if (!(error instanceof z.ZodError)) {
      throw new Error(`Expected ZodError, got ${error?.constructor?.name}`)
    }

    expectedErrors.forEach(expectedError => {
      const matchingError = error.errors.find(
        err => err.path.join('.') === expectedError.path
      )
      
      if (!matchingError) {
        throw new Error(`Expected error at path '${expectedError.path}' not found`)
      }
      
      if (!matchingError.message.includes(expectedError.message)) {
        throw new Error(
          `Expected message '${expectedError.message}' not found in '${matchingError.message}'`
        )
      }
    })
  }
}

/**
 * ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã®ãƒ†ã‚¹ãƒˆç”¨ãƒ˜ãƒ«ãƒ‘ãƒ¼
 */
export function isBrandType<T, TBrand>(
  value: unknown,
  validator: (v: unknown) => value is T & { __brand: TBrand }
): value is T & { __brand: TBrand } {
  return validator(value)
}
```

## å®Ÿè£…è¨ˆç”»

### ãƒ•ã‚§ãƒ¼ã‚º1: åŸºç›¤æ•´å‚™ï¼ˆ1-2é€±é–“ï¼‰

#### 1.1 ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—åŸºç›¤ã®æ§‹ç¯‰
- [ ] `entities/types/brand.ts` - ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®å®Ÿè£…
- [ ] åŸºæœ¬çš„ãªãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ï¼ˆUserId, Email, UserNameï¼‰ã®ä½œæˆ
- [ ] Zodã‚¹ã‚­ãƒ¼ãƒã¨ã®çµ±åˆãƒ˜ãƒ«ãƒ‘ãƒ¼ã®å®Ÿè£…
- [ ] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®çµ±ä¸€

**æˆæœç‰©:**
```bash
src/
â”œâ”€â”€ entities/
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ brand.ts          # ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã®åŸºç›¤
â”‚   â””â”€â”€ User.ts               # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
```

**æ¤œè¨¼åŸºæº–:**
- ã™ã¹ã¦ã®ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ãŒå‹å®‰å…¨ã§ã‚ã‚‹ã“ã¨
- Zodãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ—¥æœ¬èªã§é©åˆ‡ã«è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨

#### 1.2 ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å®Ÿè£…
- [ ] Userã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®å®Œå…¨å®Ÿè£…
- [ ] UserFactoryã‚¯ãƒ©ã‚¹ã®å®Ÿè£…
- [ ] UserHelpersãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®å®Ÿè£…
- [ ] åŒ…æ‹¬çš„ãªãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ä½œæˆ

**å®Ÿè£…å„ªå…ˆåº¦:**
1. æœ€é‡è¦: UserId, Email ã®ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—
2. é‡è¦: UserProfile ã®æ§‹é€ å®šç¾©
3. æ¨å¥¨: UserHelpers ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯

#### 1.3 ãƒ†ã‚¹ãƒˆåŸºç›¤ã®æ§‹ç¯‰
- [ ] ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆfactories.tsï¼‰ã®ä½œæˆ
- [ ] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ˜ãƒ«ãƒ‘ãƒ¼ï¼ˆvalidation-helpers.tsï¼‰ã®å®Ÿè£…
- [ ] ãƒ¢ãƒƒã‚¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®åŸºç›¤ä½œæˆ
- [ ] ãƒ†ã‚¹ãƒˆè¨­å®šã®æœ€é©åŒ–

### ãƒ•ã‚§ãƒ¼ã‚º2: ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å®Ÿè£…ï¼ˆ2-3é€±é–“ï¼‰

#### 2.1 åŸºæœ¬ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®å®Ÿè£…
- [ ] GetUserUseCase - ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—ãƒ­ã‚¸ãƒƒã‚¯
- [ ] UpdateUserUseCase - ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°ãƒ­ã‚¸ãƒƒã‚¯
- [ ] CreateUserUseCase - ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆãƒ­ã‚¸ãƒƒã‚¯
- [ ] DeleteUserUseCase - ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤ãƒ­ã‚¸ãƒƒã‚¯

**å„ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®å®Ÿè£…é …ç›®:**
1. å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚­ãƒ¼ãƒ
2. å‡ºåŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚­ãƒ¼ãƒ
3. ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã®å®Ÿè£…
4. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
5. åŒ…æ‹¬çš„ãªãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

#### 2.2 é«˜åº¦ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
- [ ] SearchUsersUseCase - ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢
- [ ] BulkUpdateUsersUseCase - ä¸€æ‹¬æ›´æ–°
- [ ] UserAnalyticsUseCase - ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ†æ

**ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ä¾‹:**
- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ä¸€æ„æ€§åˆ¶ç´„
- ç®¡ç†è€…æ¨©é™ã®ãƒã‚§ãƒƒã‚¯
- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæœ‰åŠ¹æ€§ã®ç¢ºèª
- ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®ä¿è¨¼

### ãƒ•ã‚§ãƒ¼ã‚º3: ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãƒ¬ã‚¤ãƒ¤ãƒ¼å®Ÿè£…ï¼ˆ2-3é€±é–“ï¼‰

#### 3.1 Repositoryå®Ÿè£…
- [ ] ApiUserRepository - REST APIé€£æº
- [ ] LocalStorageUserRepository - ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸é€£æº
- [ ] CacheUserRepository - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ä»˜ããƒªãƒã‚¸ãƒˆãƒª

**å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³:**
```typescript
// çµ±åˆãƒ†ã‚¹ãƒˆä¾‹
describe('ApiUserRepository', () => {
  test('APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‹ã‚‰ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¸ã®å¤‰æ›', async () => {
    // APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒ¢ãƒƒã‚¯
    // ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¸ã®å¤‰æ›ãƒ†ã‚¹ãƒˆ
    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã®ãƒ†ã‚¹ãƒˆ
  })
})
```

#### 3.2 Serviceå®Ÿè£…
- [ ] EmailNotificationService - ãƒ¡ãƒ¼ãƒ«é€šçŸ¥
- [ ] PushNotificationService - ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
- [ ] AuditLogService - ç›£æŸ»ãƒ­ã‚°

#### 3.3 Presenterå®Ÿè£…
- [ ] UserPresenter - ãƒ“ãƒ¥ãƒ¼å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯
- [ ] UserListPresenter - ãƒªã‚¹ãƒˆè¡¨ç¤ºç”¨
- [ ] UserSearchResultPresenter - æ¤œç´¢çµæœç”¨

### ãƒ•ã‚§ãƒ¼ã‚º4: ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯çµ±åˆï¼ˆ2-3é€±é–“ï¼‰

#### 4.1 React Components
- [ ] UserProfile - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¡¨ç¤º
- [ ] UserForm - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 
- [ ] UserList - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆè¡¨ç¤º
- [ ] UserSearch - ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢

**ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆåŸå‰‡:**
- ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³é–¢å¿ƒã®åˆ†é›¢
- å‹å®‰å…¨ãªpropså®šç¾©
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

#### 4.2 Custom Hooks
- [ ] useUserForm - ãƒ•ã‚©ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†
- [ ] useUserSearch - æ¤œç´¢æ©Ÿèƒ½
- [ ] useUserCache - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†

```typescript
// ãƒ•ãƒƒã‚¯å®Ÿè£…ä¾‹
export function useUserForm(userId: string) {
  const updateUseCase = useUpdateUserUseCase()
  
  return useForm({
    validationSchema: UserFormSchema,
    onSubmit: async (data) => {
      await updateUseCase.execute(data)
    }
  })
}
```

#### 4.3 ä¾å­˜é–¢ä¿‚æ³¨å…¥ã®çµ±åˆ
- [ ] DIContainer ã®å®Ÿè£…
- [ ] ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­å®šã®æ§‹ç¯‰
- [ ] ç’°å¢ƒåˆ¥è¨­å®šã®å®Ÿè£…
- [ ] ãƒ†ã‚¹ãƒˆç”¨ã‚³ãƒ³ãƒ†ãƒŠã®ä½œæˆ

### ãƒ•ã‚§ãƒ¼ã‚º5: é«˜åº¦ãªæ©Ÿèƒ½ï¼ˆ3-4é€±é–“ï¼‰

#### 5.1 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- [ ] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å®Ÿè£…
- [ ] æ®µéšçš„ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®å°å…¥
- [ ] ãƒ¡ãƒ¢åŒ–æˆ¦ç•¥ã®å®Ÿè£…
- [ ] ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºæœ€é©åŒ–

**æœ€é©åŒ–æŒ‡æ¨™:**
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œæ™‚é–“: < 10ms
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å›æ•°: æœ€å°åŒ–
- ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º: < 500KB (gzipå¾Œ)

#### 5.2 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®é«˜åº¦åŒ–
- [ ] ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
- [ ] ã‚¨ãƒ©ãƒ¼ç›£è¦–ã¨ã®çµ±åˆ
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªã‚¨ãƒ©ãƒ¼è¡¨ç¤º
- [ ] ã‚¨ãƒ©ãƒ¼å¾©æ—§æ©Ÿèƒ½

#### 5.3 ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹å‘ä¸Š
- [ ] TypeDocè‡ªå‹•ç”Ÿæˆã®è¨­å®š
- [ ] Storybookçµ±åˆ
- [ ] ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«ã®ä½œæˆ
- [ ] é–‹ç™ºç”¨ãƒ¢ãƒƒã‚¯ã®å……å®Ÿ

### ãƒ•ã‚§ãƒ¼ã‚º6: æœ¬æ ¼é‹ç”¨æº–å‚™ï¼ˆ2-3é€±é–“ï¼‰

#### 6.1 å“è³ªä¿è¨¼
- [ ] E2Eãƒ†ã‚¹ãƒˆã®åŒ…æ‹¬çš„å®Ÿè£…
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆã®å®Ÿæ–½
- [ ] ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

**å“è³ªåŸºæº–:**
- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸: 90%ä»¥ä¸Š
- E2Eãƒ†ã‚¹ãƒˆ: ä¸»è¦æ©Ÿèƒ½ã™ã¹ã¦
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: Core Web Vitalsåˆæ ¼
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£: WCAG 2.1 AAæº–æ‹ 

#### 6.2 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™
- [ ] APIä»•æ§˜æ›¸ã®å®Œæˆ
- [ ] é‹ç”¨æ‰‹é †æ›¸ã®ä½œæˆ
- [ ] ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰
- [ ] é–‹ç™ºè€…å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

#### 6.3 CI/CDæœ€é©åŒ–
- [ ] ãƒ“ãƒ«ãƒ‰ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æœ€é©åŒ–
- [ ] ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“ã®çŸ­ç¸®
- [ ] ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè‡ªå‹•åŒ–
- [ ] ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

### ç¶™ç¶šçš„æ”¹å–„ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆé‹ç”¨é–‹å§‹å¾Œï¼‰

#### å®Ÿéš›ã®åˆ©ç”¨ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãæ”¹å–„
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£åˆ†æ
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
- [ ] ã‚¨ãƒ©ãƒ¼ç‡ã®è¿½è·¡
- [ ] æ©Ÿèƒ½åˆ©ç”¨çŠ¶æ³ã®åˆ†æ

#### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®é€²åŒ–
- [ ] æ–°ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å°å…¥
- [ ] ãƒ¬ã‚¬ã‚·ãƒ¼ã‚³ãƒ¼ãƒ‰ã®æ®µéšçš„æ”¹å–„
- [ ] ä¾å­˜é–¢ä¿‚ã®æœ€æ–°åŒ–
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ã®å¼·åŒ–

### ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

| ãƒ•ã‚§ãƒ¼ã‚º | æœŸé–“ | ä¸»è¦æˆæœç‰© | å®Œäº†åŸºæº– |
|---------|------|-----------|----------|
| 1 | 1-2é€±é–“ | ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—åŸºç›¤ | åŸºæœ¬çš„ãªã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒå‹•ä½œ |
| 2 | 2-3é€±é–“ | ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å®Ÿè£… | CRUDã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®Œäº† |
| 3 | 2-3é€±é–“ | ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼å®Ÿè£… | å¤–éƒ¨é€£æºãŒå‹•ä½œ |
| 4 | 2-3é€±é–“ | Reactçµ±åˆ | UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå®Œæˆ |
| 5 | 3-4é€±é–“ | é«˜åº¦ãªæ©Ÿèƒ½ | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™é”æˆ |
| 6 | 2-3é€±é–“ | é‹ç”¨æº–å‚™ | æœ¬æ ¼é‹ç”¨é–‹å§‹å¯èƒ½ |

### æ¨å¥¨é–‹ç™ºé †åº

#### é€±å˜ä½ã®ä½œæ¥­è¨ˆç”»

**ç¬¬1é€±:** ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
- Day 1-2: ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
- Day 3-4: Userã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å®Ÿè£…
- Day 5: ãƒ†ã‚¹ãƒˆåŸºç›¤æ§‹ç¯‰

**ç¬¬2é€±:** ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹åŸºç›¤
- Day 1-2: GetUserUseCaseå®Ÿè£…
- Day 3-4: UpdateUserUseCaseå®Ÿè£…
- Day 5: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°çµ±ä¸€

**ç¬¬3-4é€±:** ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã¨ãƒªãƒã‚¸ãƒˆãƒª
- å¤–éƒ¨APIé€£æºã®å®Ÿè£…
- ãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…
- çµ±åˆãƒ†ã‚¹ãƒˆã®ä½œæˆ

**ç¬¬5-6é€±:** Reactçµ±åˆ
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- ãƒ•ãƒƒã‚¯å®Ÿè£…
- DIçµ±åˆ

ã“ã®è¨ˆç”»ã«ã‚ˆã‚Šã€æ®µéšçš„ã«æ©Ÿèƒ½ã‚’æ§‹ç¯‰ã—ã€å„ãƒ•ã‚§ãƒ¼ã‚ºã§å‹•ä½œå¯èƒ½ãªæˆæœç‰©ã‚’æä¾›ã§ãã¾ã™ã€‚

## åˆ©ç‚¹ã¨æœŸå¾…åŠ¹æœ

### ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¿ã‚¤ãƒ—ã¨Zodãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹æ©æµ

#### å‹å®‰å…¨æ€§ã®å‘ä¸Š
- **ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã‚¨ãƒ©ãƒ¼æ¤œå‡º**: åŒã˜ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ã§ã‚‚æ„å‘³ã®ç•°ãªã‚‹å€¤ã®æ··åŒã‚’é˜²æ­¢
- **é–¢æ•°ã‚·ã‚°ãƒãƒãƒ£ã®æ˜ç¢ºåŒ–**: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ„å›³ãŒå‹ãƒ¬ãƒ™ãƒ«ã§è¡¨ç¾ã•ã‚Œã‚‹
- **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®‰å…¨æ€§**: å‹ã®å¤‰æ›´ãŒä¾å­˜ç®‡æ‰€ã«ç¢ºå®Ÿã«ä¼æ’­

```typescript
// Before: å¼•æ•°ã®æ„å‘³ãŒä¸æ˜ç¢º
function transferMoney(from: string, to: string, amount: number) { ... }

// After: å‹ãƒ¬ãƒ™ãƒ«ã§æ„å‘³ãŒæ˜ç¢º
function transferMoney(from: AccountId, to: AccountId, amount: Amount) { ... }
```

#### å®Ÿè¡Œæ™‚å®‰å…¨æ€§ã®ä¿è¨¼
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®è‡ªå‹•åŒ–**: ãƒ‡ãƒ¼ã‚¿å¢ƒç•Œã§ã®Zodã«ã‚ˆã‚‹è‡ªå‹•æ¤œè¨¼
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®çµ±ä¸€**: ä¸€è²«ã—ãŸæ—¥æœ¬èªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§**: ä¸æ­£ãªãƒ‡ãƒ¼ã‚¿ã®æ—©æœŸæ¤œå‡ºã¨é™¤å¤–

#### é–‹ç™ºç”Ÿç”£æ€§ã®å‘ä¸Š
- **IDEã‚µãƒãƒ¼ãƒˆ**: å‹æƒ…å ±ã«ã‚ˆã‚‹å¼·åŠ›ãªè‡ªå‹•è£œå®Œã¨ã‚¨ãƒ©ãƒ¼æ¤œå‡º
- **ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£**: ãƒ¢ãƒƒã‚¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆãŒå®¹æ˜“
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ**: TypeDocã«ã‚ˆã‚‹è‡ªå‹•APIæ–‡æ›¸ç”Ÿæˆ

### é–‹ç™ºåŠ¹ç‡ã¸ã®å½±éŸ¿

#### çŸ­æœŸçš„åŠ¹æœï¼ˆ1-3ãƒ¶æœˆï¼‰
- **ãƒã‚°å‰Šæ¸›**: å‹ã‚¨ãƒ©ãƒ¼ã«ã‚ˆã‚‹å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ã®90%æ¸›å°‘
- **ãƒ¬ãƒ“ãƒ¥ãƒ¼åŠ¹ç‡åŒ–**: å‹å®‰å…¨æ€§ã«ã‚ˆã‚‹å“è³ªæ‹…ä¿ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹ã®ç°¡ç´ åŒ–
- **æ–°è¦å‚åŠ è€…ã®å­¦ç¿’**: å‹å®šç¾©ã«ã‚ˆã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã®å¯è¦–åŒ–

#### ä¸­æœŸçš„åŠ¹æœï¼ˆ3-12ãƒ¶æœˆï¼‰
- **ä¿å®ˆæ€§å‘ä¸Š**: è¦æ±‚å¤‰æ›´æ™‚ã®å½±éŸ¿ç¯„å›²ã®æ˜ç¢ºåŒ–
- **ä¸¦è¡Œé–‹ç™º**: ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å¥‘ç´„ã«ã‚ˆã‚‹ç‹¬ç«‹ã—ãŸé–‹ç™ºä½œæ¥­
- **å“è³ªã®å®‰å®š**: è‡ªå‹•åŒ–ã•ã‚ŒãŸãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹å“è³ªã®åº•ä¸Šã’

#### é•·æœŸçš„åŠ¹æœï¼ˆ1å¹´ä»¥ä¸Šï¼‰
- **æŠ€è¡“çš„è² å‚µã®æŠ‘åˆ¶**: å‹å®‰å…¨æ€§ã«ã‚ˆã‚‹è¨­è¨ˆå“è³ªã®ç¶­æŒ
- **ãƒãƒ¼ãƒ çŸ¥è­˜ã®å…±æœ‰**: ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã®å‹ã«ã‚ˆã‚‹çŸ¥è­˜ã®æ˜æ–‡åŒ–
- **æ–°æ©Ÿèƒ½é–‹ç™ºã®åŠ é€Ÿ**: å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è“„ç©

### ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®åˆ©ç‚¹

#### é–¢å¿ƒã®åˆ†é›¢ã«ã‚ˆã‚‹æ©æµ
- **ãƒ†ã‚¹ãƒˆæ€§**: å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ç‹¬ç«‹ã—ãŸãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- **äº¤æ›å¯èƒ½æ€§**: å¤–éƒ¨ä¾å­˜ã®å®¹æ˜“ãªç½®ãæ›ãˆ
- **ç†è§£ã—ã‚„ã™ã•**: æ˜ç¢ºãªè²¬ä»»å¢ƒç•Œã«ã‚ˆã‚‹ä¿å®ˆæ€§å‘ä¸Š

#### ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ã¸ã®è²¢çŒ®
- **æ©Ÿèƒ½è¿½åŠ é€Ÿåº¦**: æ–°æ©Ÿèƒ½ã®å®‰å…¨ã§è¿…é€Ÿãªè¿½åŠ 
- **æŠ€è¡“çš„æŸ”è»Ÿæ€§**: UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚„ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®å¤‰æ›´å¯¾å¿œ
- **éšœå®³å¯¾å¿œ**: å•é¡Œã®åˆ†é›¢ã¨è¿…é€Ÿãªå¯¾å¿œ

### å­¦ç¿’åŠ¹æœã¨ã‚¹ã‚­ãƒ«å‘ä¸Š

#### å€‹äººã‚¹ã‚­ãƒ«ã®å‘ä¸Š
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ**: å¤§è¦æ¨¡ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆã®å®Ÿè·µçµŒé¨“
- **TypeScriptç†Ÿç·´åº¦**: é«˜åº¦ãªå‹ã‚·ã‚¹ãƒ†ãƒ ã®æ´»ç”¨ã‚¹ã‚­ãƒ«
- **é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°**: ä¸å¤‰æ€§ã¨ç´”ç²‹é–¢æ•°ã®å®Ÿè·µ

#### ãƒãƒ¼ãƒ ã‚¹ã‚­ãƒ«ã®å‘ä¸Š
- **è¨­è¨ˆãƒ¬ãƒ“ãƒ¥ãƒ¼**: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¦³ç‚¹ã§ã®å»ºè¨­çš„ãªãƒ¬ãƒ“ãƒ¥ãƒ¼
- **ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆ**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®é©åˆ‡ãªãƒ¢ãƒ‡ãƒªãƒ³ã‚°
- **ãƒ†ã‚¹ãƒˆæˆ¦ç•¥**: åŠ¹æœçš„ãªãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã®æ§‹ç¯‰

### å“è³ªæŒ‡æ¨™ã®æ”¹å–„

#### å®šé‡çš„æŒ‡æ¨™
```
- ãƒã‚°ç™ºç”Ÿç‡: 70%æ¸›å°‘ï¼ˆå‹å®‰å…¨æ€§ã«ã‚ˆã‚‹ï¼‰
- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸: 90%ä»¥ä¸Šç¶­æŒ
- ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚é–“: 40%çŸ­ç¸®
- æ–°æ©Ÿèƒ½é–‹ç™ºæ™‚é–“: 30%çŸ­ç¸®ï¼ˆå†åˆ©ç”¨æ€§ã«ã‚ˆã‚‹ï¼‰
```

#### å®šæ€§çš„æŒ‡æ¨™
- **ã‚³ãƒ¼ãƒ‰å“è³ª**: ä¸€è²«æ€§ã®ã‚ã‚‹è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³
- **ä¿å®ˆæ€§**: å¤‰æ›´æ™‚ã®å½±éŸ¿ç¯„å›²ã®äºˆæ¸¬å¯èƒ½æ€§
- **å¯èª­æ€§**: ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã®æ˜ç¢ºãªè¡¨ç¾

### çµ„ç¹”ã¸ã®è²¢çŒ®

#### æŠ€è¡“çš„ãªè²¢çŒ®
- **æ¨™æº–åŒ–**: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã®çµ„ç¹”å†…æ¨™æº–ç¢ºç«‹
- **çŸ¥è­˜å…±æœ‰**: ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®æ–‡æ›¸åŒ–ã¨å…±æœ‰
- **æŠ€è¡“è² å‚µç®¡ç†**: ç¶™ç¶šçš„ãªè¨­è¨ˆå“è³ªã®ç¶­æŒ

#### ãƒ“ã‚¸ãƒã‚¹çš„ãªè²¢çŒ®
- **é–‹ç™ºé€Ÿåº¦**: å®‰å®šã—ãŸæ©Ÿèƒ½é–‹ç™ºã‚¹ãƒ”ãƒ¼ãƒ‰ã®å®Ÿç¾
- **å“è³ªä¿è¨¼**: é¡§å®¢æº€è¶³åº¦å‘ä¸Šã«å¯„ä¸ã™ã‚‹å“è³ªãƒ¬ãƒ™ãƒ«
- **ãƒªã‚¹ã‚¯è»½æ¸›**: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚‹æŠ€è¡“ãƒªã‚¹ã‚¯ã®ç®¡ç†

### æˆåŠŸã®æ¸¬å®šæŒ‡æ¨™

#### çŸ­æœŸæŒ‡æ¨™ï¼ˆ1-3ãƒ¶æœˆï¼‰
- [ ] å‹ã‚¨ãƒ©ãƒ¼ã«ã‚ˆã‚‹ãƒ“ãƒ«ãƒ‰å¤±æ•—ç‡: é€±1å›ä»¥ä¸‹
- [ ] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸: 85%ä»¥ä¸Š
- [ ] ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†åˆ©ç”¨ç‡: 60%ä»¥ä¸Š

#### ä¸­æœŸæŒ‡æ¨™ï¼ˆ3-12ãƒ¶æœˆï¼‰
- [ ] æ–°æ©Ÿèƒ½é–‹ç™ºã«ãŠã‘ã‚‹è¨­è¨ˆæ™‚é–“: å…¨ä½“ã®20%ä»¥ä¸‹
- [ ] ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒã‚°ç‡: æœˆ5ä»¶ä»¥ä¸‹
- [ ] ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã®è¨­è¨ˆæŒ‡æ‘˜: 50%æ¸›å°‘

#### é•·æœŸæŒ‡æ¨™ï¼ˆ1å¹´ä»¥ä¸Šï¼‰
- [ ] ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ä¸€è²«æ€§: 95%ä»¥ä¸Šã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§æ¨™æº–ãƒ‘ã‚¿ãƒ¼ãƒ³ä½¿ç”¨
- [ ] é–‹ç™ºè€…ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ™‚é–“: 50%çŸ­ç¸®
- [ ] æŠ€è¡“çš„è² å‚µæŒ‡æ¨™: ä¸€å®šãƒ¬ãƒ™ãƒ«ä»¥ä¸‹ã§ç¶­æŒ

ã“ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å®Ÿè£…ã«ã‚ˆã‚Šã€æŠ€è¡“çš„ãªå“è³ªå‘ä¸Šã ã‘ã§ãªãã€ãƒãƒ¼ãƒ å…¨ä½“ã®ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—ã¨çµ„ç¹”çš„ãªé–‹ç™ºåŠ›å¼·åŒ–ã‚’å®Ÿç¾ã—ã¾ã™ã€‚